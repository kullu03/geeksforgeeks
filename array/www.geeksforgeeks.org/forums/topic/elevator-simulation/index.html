<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
       <title>elevator simulation - GeeksforGeeks</title>
       <style type="text/css" media="screen">
          @import url('http://d2o58evtke57tz.cloudfront.net/wp-content/themes/minimoo/style.css');
    </style>
      <link href="http://d2o58evtke57tz.cloudfront.net/wp-content/themes/minimoo/favicon.ico" rel="shortcut icon" />    
    
<!-- This site is optimized with the Yoast WordPress SEO plugin v1.7.1 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="elevator simulation - GeeksforGeeks" />
<meta property="og:description" content="Home &rsaquo; Forums &rsaquo; Interview Questions &rsaquo; elevator simulation Tagged:&nbsp;Google This topic contains 0 replies, has 1 voice, and was last updated by &nbsp;deep 2 years, 2 months ago. Author Posts September 1, 2012 at 8:05 PM #86808 deepParticipant it is large program for elevator , can someone make it small and simple to understand &hellip;" />
<meta property="og:url" content="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/" />
<meta property="og:site_name" content="GeeksforGeeks" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='stylesheet' id='wp-quicklatex-format-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-quicklatex/css/quicklatex-format.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/css/bbpress.css?ver=2.5.4-5380' type='text/css' media='screen' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-quicklatex/js/wp-quicklatex-frontend.js?ver=1.0'></script>

<!-- Bad Behavior 2.2.16 run time: 1.518 ms -->
<script type="text/javascript">
<!--
function bb2_addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}

bb2_addLoadEvent(function() {
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1417119723 210.212.53.139 172.19.11.158';
			document.forms[i].appendChild(myElement);
		}
	}
});
// --></script>
		<style type="text/css" id="syntaxhighlighteranchor"></style>
   <meta name="google-site-verification" content="rHK2v8_zzuAZQY8JHAzbllDN8u-aQxcn2Kqnp67Old0" />
</head>

<body>
<!-- o4dI0sCXUgoSONabbd8mbZ4SA3E -->    
    <div id="wrapper">
        <div class="blog-info">
                <h1 class="blog-title">
                <a href="http://www.geeksforgeeks.org" title="GeeksforGeeks">GeeksforGeeks</a>
            </h1>
       
            <div class="blog-description">
                A computer science portal for geeks            </div>
        </div>
        <b><p>  <h2 align="right"> <a href="http://geeksquiz.com/">GeeksQuiz</a></h2> 
   <a href="http://www.geeksforgeeks.org/wp-login.php">Login</a> 
         </p></b>  
         
         <div class="clear"></div>         
              
                     
            <div id="menu">   
                 <ul>
 <li><a href="http://www.geeksforgeeks.org">Home</a></li>
  <li><a href="http://www.geeksforgeeks.org/fundamentals-of-algorithms/">Algorithms</a></li>
 <li><a href="http://www.geeksforgeeks.org/data-structures/">DS</a></li>
  <li><a href="http://www.geeksforgeeks.org/gate-corner/">GATE</a></li>
  <li><a href="http://www.geeksforgeeks.org/about/interview-corner/">Interview Corner</a></li>
  <li><a href="http://www.geeksforgeeks.org/forums/">Q&A</a></li>
  <li><a href="http://www.geeksforgeeks.org/c/">C</a></li>
  <li><a href="http://www.geeksforgeeks.org/c-plus-plus/">C++</a></li>
  <li><a href="http://www.geeksforgeeks.org/java/">Java</a></li>
  <li><a href="http://www.geeksforgeeks.org/books/">Books</a></li>
  <li><a href="http://www.geeksforgeeks.org/contribute/">Contribute</a></li>
  <li><a href="http://www.geeksforgeeks.org/contribute/ask-a-question/">Ask a Q</a></li>
  <li><a href="http://www.geeksforgeeks.org/about/">About</a></li>
            </ul>

               
            <div class="clear"></div>     
        </div>
             <div id="content">	
</div>
<div class="clear"></div>             

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=138031159685820";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="https://www.facebook.com/pages/GeeksforGeeks/316764689022" data-width="700" data-show-faces="true" data-send="false"></div>

<div id="bbpress-content">	

	

			

	<div class="page-main" id="page-86808">				
		
		<div class="page-info">					
			<h2 class="page-title">elevator simulation</h2>
		</div>
		
		<div class="page-content">
		
<div id="bbpress-forums">

	<div class="bbp-breadcrumb"><p><a href="http://www.geeksforgeeks.org/" class="bbp-breadcrumb-home">Home</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <a href="http://www.geeksforgeeks.org/forums/" class="bbp-breadcrumb-root">Forums</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <a href="http://www.geeksforgeeks.org/forums/forum/interview-questions/" class="bbp-breadcrumb-forum">Interview Questions</a> <span class="bbp-breadcrumb-sep">&rsaquo;</span> <span class="bbp-breadcrumb-current">elevator simulation</span></p></div>
	
	
		<div class="bbp-topic-tags"><p>Tagged:&nbsp;<a href="http://www.geeksforgeeks.org/forums/topic-tag/google/" rel="tag">Google</a></p></div>
		<div class="bbp-template-notice info"><p class="bbp-topic-description">This topic contains 0 replies, has 1 voice, and was last updated by <a href="http://www.geeksforgeeks.org/forums/users/deep/" title="View deep&#039;s profile" class="bbp-author-avatar" rel="nofollow"></a>&nbsp;<a href="http://www.geeksforgeeks.org/forums/users/deep/" title="View deep&#039;s profile" class="bbp-author-name" rel="nofollow">deep</a> <a href="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/" title="elevator simulation">2 years, 2 months ago</a>.</p></div>
		
		
			

<div class="bbp-pagination">
	<div class="bbp-pagination-count">

		
	</div>

	<div class="bbp-pagination-links">

		
	</div>
</div>


			

<ul id="topic-86808-replies" class="forums bbp-replies">

	<li class="bbp-header">

		<div class="bbp-reply-author">Author</div><!-- .bbp-reply-author -->

		<div class="bbp-reply-content">

			
				Posts
				
				
			
		</div><!-- .bbp-reply-content -->

	</li><!-- .bbp-header -->

	<li class="bbp-body">

		
			<li>

<div id="post-86808" class="bbp-reply-header">

	<div class="bbp-meta">

		<span class="bbp-reply-post-date">September 1, 2012 at 8:05 PM</span>

		
		<a href="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/#post-86808" class="bbp-reply-permalink">#86808</a>

		
		<span class="bbp-admin-links"></span>
		
	</div><!-- .bbp-meta -->

</div><!-- #post-86808 -->

<div class="post-86808 topic type-topic status-publish hentry even bbp-parent-forum-72153 bbp-parent-topic-86808 bbp-reply-position-1 user-id-10247 topic-author">

	<div class="bbp-reply-author">

		
		<a href="http://www.geeksforgeeks.org/forums/users/deep/" title="View deep&#039;s profile" class="bbp-author-avatar" rel="nofollow"></a><br /><a href="http://www.geeksforgeeks.org/forums/users/deep/" title="View deep&#039;s profile" class="bbp-author-name" rel="nofollow">deep</a><br /><div class="bbp-author-role">Participant</div>
		
		
	</div><!-- .bbp-reply-author -->

	<div class="bbp-reply-content">

		
		<p>it is large program for elevator , can someone make it small and simple to understand</p>
<p>or share u code</p>
<p>#include &lt;Mega32.h&gt;</p>
<p>#include &lt;stdio.h&gt; // sprintf</p>
<p>#include &lt;stdlib.h&gt; // malloc</p>
<p>#include &lt;delay.h&gt;</p>
<p>#include &lt;Math.h&gt;</p>
<p>#define begin {</p>
<p>#define end }</p>
<p>#define floorsize 38</p>
<p>#define pause 75</p>
<p>#define trivial 0 //one elevator does everything</p>
<p>#define simple 1 //all elevators chase each other</p>
<p>#define normal 2 //optimal elevator operation</p>
<p>#define sabbath 3 //one or all elevators dedicated to going up/down, stopping on all floors</p>
<p></p>
<p>#define floors 4</p>
<p>int mode = normal;</p>
<p></p>
<p>typedef struct</p>
<p>{</p>
<p>int floor;//current floor</p>
<p>int traveldir;//current direction of travel -1 = down, 1 = up;</p>
<p>char turnaround;//floor where the elevator should switch directions</p>
<p>int count;//used for interrupt to determine how far to send elevator</p>
<p>char motorstate;//state of step motor</p>
<p>char button[floors];//buttons in elevator that have been pressed</p>
<p>char uprequests[floors];//requests from people outside the elevator to go up</p>
<p>char oldbutton[floors];</p>
<p>char downrequests[floors];//requests from people outside the elevator to go down</p>
<p>int paused;//number of interrupts to pause elevator for</p>
<p>char on;//whether elevator should move 1 stepper cycle</p>
<p>char id;//elevator #</p>
<p>} Elevator;</p>
<p></p>
<p>typedef Elevator *elevator_t;//elevator_t is a pointer to type Elevator</p>
<p>void algorithm1(elevator_t);</p>
<p>void addRequests(void);</p>
<p>void oneStep(elevator_t);</p>
<p>void algorithm2(void);</p>
<p>void algorithm3(elevator_t);</p>
<p>void poll2(void);</p>
<p></p>
<p>elevator_t elevator1, elevator2, elevator3;</p>
<p>char button[floors+floors]; //hidden outside button state</p>
<p>char button2[floors+floors]; //displayed outside button state</p>
<p>char old[floors+floors];</p>
<p>int waiting = 0;</p>
<p>int time = 0;</p>
<p>int ready1 = 0;</p>
<p>int ready2 = 0;</p>
<p>int serialFlag = 0;</p>
<p>char buffer[10];</p>
<p>int bufferindex = 0;</p>
<p></p>
<p>interrupt [TIM0_COMP] void timer0_compare(void)</p>
<p>{</p>
<p>time = (time + 1)%50;</p>
<p>if(UCSRA.7)</p>
<p>serialFlag = 1;</p>
<p>if(mode != sabbath)</p>
<p>poll2();</p>
<p>if(time)</p>
<p>{</p>
<p>return;</p>
<p>}</p>
<p>if (waiting)</p>
<p>{</p>
<p>if(elevator1-&gt;on)</p>
<p>{</p>
<p>elevator1-&gt;motorstate = (elevator1-&gt;motorstate + elevator1-&gt;traveldir+4)%4;</p>
<p></p>
<p>            if(elevator1-&gt;motorstate ==0)</p>
<p>PORTA = 0x0a;</p>
<p>else if(elevator1-&gt;motorstate==1)</p>
<p>PORTA = 0x06;</p>
<p>else if(elevator1-&gt;motorstate==2)</p>
<p>PORTA = 0x05;</p>
<p>else</p>
<p>PORTA = 0x09;</p>
<p>elevator1-&gt;count++;</p>
<p>}</p>
<p>elevator1-&gt;on = 0;</p>
<p>if(elevator2-&gt;on)</p>
<p>{</p>
<p>elevator2-&gt;motorstate = (elevator2-&gt;motorstate + elevator2-&gt;traveldir+4)%4;</p>
<p></p>
<p>            if(elevator2-&gt;motorstate ==0)</p>
<p>PORTB = 0x0a;</p>
<p>else if(elevator2-&gt;motorstate==1)</p>
<p>PORTB = 0x06;</p>
<p>else if(elevator2-&gt;motorstate==2)</p>
<p>PORTB = 0x05;</p>
<p>else</p>
<p>PORTB = 0x09;</p>
<p>elevator2-&gt;count++;</p>
<p>}</p>
<p>elevator2-&gt;on = 0;</p>
<p>if(elevator3-&gt;on)</p>
<p>{</p>
<p>elevator3-&gt;motorstate = (elevator3-&gt;motorstate + elevator3-&gt;traveldir+4)%4;</p>
<p></p>
<p>            if(elevator3-&gt;motorstate ==0)</p>
<p>PORTC = 0x0a;</p>
<p>else if(elevator3-&gt;motorstate==1)</p>
<p>PORTC = 0x06;</p>
<p>else if(elevator3-&gt;motorstate==2)</p>
<p>PORTC = 0x05;</p>
<p>else</p>
<p>PORTC = 0x09;</p>
<p>elevator3-&gt;count++;</p>
<p>}</p>
<p>elevator3-&gt;on = 0;</p>
<p></p>
<p>        waiting = 0;</p>
<p>}</p>
<p>}</p>
<p></p>
<p>//poll the buttons</p>
<p>void poll()</p>
<p>{</p>
<p>if(~PINA &amp; 0x10)//Internal elevator buttons</p>
<p>elevator1-&gt;button[0] = 1;</p>
<p>if(~PINA &amp; 0x20)</p>
<p>elevator1-&gt;button[1] = 1;</p>
<p>if(~PINA &amp; 0x40)</p>
<p>elevator1-&gt;button[2] = 1;</p>
<p>if(~PINA &amp; 0x80)</p>
<p>elevator1-&gt;button[3] = 1;</p>
<p></p>
<p>    if(~PINB &amp; 0x10)//Internal elevator buttons</p>
<p>elevator2-&gt;button[0] = 1;</p>
<p>if(~PINB &amp; 0x20)</p>
<p>elevator2-&gt;button[1] = 1;</p>
<p>if(~PINB &amp; 0x40)</p>
<p>elevator2-&gt;button[2] = 1;</p>
<p>if(~PINB &amp; 0x80)</p>
<p>elevator2-&gt;button[3] = 1;</p>
<p></p>
<p>    if(~PINC &amp; 0x10)//Internal elevator buttons</p>
<p>elevator3-&gt;button[0] = 1;</p>
<p>if(~PINC &amp; 0x20)</p>
<p>elevator3-&gt;button[1] = 1;</p>
<p>if(~PINC &amp; 0x40)</p>
<p>elevator3-&gt;button[2] = 1;</p>
<p>if(~PINC &amp; 0x80)</p>
<p>elevator3-&gt;button[3] = 1;</p>
<p></p>
<p>    if(~PIND &amp; 0x04 &amp;&amp; !button2[1]){//Floor 0 up button</p>
<p>button[1] = 1;</p>
<p>button2[1] = 1;</p>
<p>}</p>
<p>if(~PIND &amp; 0x08 &amp;&amp; !button2[2]){//Floor 1 down button</p>
<p>button[2] = 1;</p>
<p>button2[2] = 1;</p>
<p>}</p>
<p>if(~PIND &amp; 0x10 &amp;&amp; !button2[3]){//Floor 1 up button</p>
<p>button[3] = 1;</p>
<p>button2[3] = 1;</p>
<p>}</p>
<p>if(~PIND &amp; 0x20 &amp;&amp; !button2[4]){//Floor 2 down button</p>
<p>button[4] = 1;</p>
<p>button2[4] = 1;</p>
<p>}</p>
<p>if(~PIND &amp; 0x40 &amp;&amp; !button2[5]){//Floor 2 up button</p>
<p>button[5] = 1;</p>
<p>button2[5] = 1;</p>
<p>}</p>
<p>if(~PIND &amp; 0x80 &amp;&amp; !button2[6]){//Floor 3 down button</p>
<p>button[6] = 1;</p>
<p>button2[6] = 1;</p>
<p>}</p>
<p>}</p>
<p></p>
<p>void initialize(void);</p>
<p>void sendbuttons(elevator_t elevator)</p>
<p>{</p>
<p>int i;</p>
<p>for (i=0;i&lt;floors;i++)</p>
<p>{</p>
<p>if(elevator-&gt;button<i> != elevator-&gt;oldbutton</i><i>)</p>
<p>{</p>
<p>printf(&#8220;inb%i%02i%irn&#8221;,elevator-&gt;id,i,elevator-&gt;button</i><i>);</p>
<p>elevator-&gt;oldbutton</i><i> = elevator-&gt;button</i><i>;</p>
<p>}</p>
<p>}</i></p>
<p></p>
<p>}</p>
<p>void main(void)</p>
<p>{</p>
<p>int i;</p>
<p>initialize();</p>
<p>while(1)</p>
<p>{</p>
<p>if(mode != sabbath)</p>
<p>poll();//poll the buttons</p>
<p></p>
<p>        for (i=1;i&lt;floors + floors-1;i++)</p>
<p>{</p>
<p>if(button2<i>!=old</i><i>)</p>
<p>printf(&#8220;outb%02i%irn&#8221;,i,button2</i><i>);</p>
<p>old</i><i> = button2</i><i>;</p>
<p>}</i></p>
<p></p>
<p>        sendbuttons(elevator1);</p>
<p>sendbuttons(elevator2);</p>
<p>sendbuttons(elevator3);</p>
<p></p>
<p>        addRequests();//add requests to elevators</p>
<p></p>
<p>        oneStep(elevator1);//control elevators</p>
<p>oneStep(elevator2);</p>
<p>oneStep(elevator3);</p>
<p></p>
<p>        waiting = 1;</p>
<p></p>
<p>        while(waiting){}</p>
<p>}</p>
<p>}</p>
<p></p>
<p>//**********************************************************</p>
<p>//Set it all up</p>
<p>void initialize(void)</p>
<p>{</p>
<p>int i;</p>
<p>//set up the ports</p>
<p></p>
<p>    DDRA=0x0f;    // lower 4 bits of PORT A are output, upper 4 are input</p>
<p>DDRB=0x0f;    // lower 4 bits of PORT B are output, upper 4 are input</p>
<p>DDRC=0x0f;    // lower 4 bits of PORT C are output, upper 4 are input</p>
<p>DDRD=0x03;    // PORT D is an input</p>
<p></p>
<p>    PORTA = 0x0a;  //turn on stepper motor</p>
<p>PORTB = 0x0a;  //turn on stepper motor</p>
<p>PORTC = 0x0a;  //turn on stepper motor</p>
<p>UCSRB = 0x18;</p>
<p>UBRRL = 103;</p>
<p>printf(&#8220;initrn&#8221;);</p>
<p>elevator1 = (elevator_t)malloc(sizeof(Elevator));</p>
<p>elevator2 = (elevator_t)malloc(sizeof(Elevator));</p>
<p>elevator3 = (elevator_t)malloc(sizeof(Elevator));</p>
<p></p>
<p>    elevator1-&gt;floor = 0;</p>
<p>elevator1-&gt;traveldir = 1;</p>
<p>elevator1-&gt;turnaround = -1;</p>
<p>elevator1-&gt;count = 0;</p>
<p>elevator1-&gt;motorstate = 0;</p>
<p>elevator1-&gt;on = 0;</p>
<p>elevator1-&gt;paused = 0;</p>
<p>elevator1-&gt;id = 1;</p>
<p></p>
<p>    for(i = 0; i&lt;floors; i++)</p>
<p>{</p>
<p>elevator1-&gt;button<i> = 0;</p>
<p>elevator1-&gt;uprequests</i><i> = 0;</p>
<p>elevator1-&gt;downrequests</i><i> = 0;</p>
<p>elevator1-&gt;oldbutton</i><i> = 0;</p>
<p>elevator2-&gt;button</i><i> = 0;</p>
<p>elevator2-&gt;uprequests</i><i> = 0;</p>
<p>elevator2-&gt;downrequests</i><i> = 0;</p>
<p>elevator2-&gt;oldbutton</i><i> = 0;</p>
<p>elevator3-&gt;button</i><i> = 0;</p>
<p>elevator3-&gt;uprequests</i><i> = 0;</p>
<p>elevator3-&gt;downrequests</i><i> = 0;</p>
<p>elevator3-&gt;oldbutton</i><i> = 0;</i></p>
<p></p>
<p>    }</p>
<p>elevator2-&gt;floor = 0;</p>
<p>elevator2-&gt;traveldir = 1;</p>
<p>elevator2-&gt;turnaround = -1;</p>
<p>elevator2-&gt;count = 0;</p>
<p>elevator2-&gt;motorstate = 0;</p>
<p>elevator2-&gt;on = 0;</p>
<p>elevator2-&gt;paused = 0;</p>
<p>elevator2-&gt;id = 2;</p>
<p></p>
<p>    elevator3-&gt;floor = 0;</p>
<p>elevator3-&gt;traveldir = 1;</p>
<p>elevator3-&gt;turnaround = -1;</p>
<p>elevator3-&gt;count = 0;</p>
<p>elevator3-&gt;motorstate = 0;</p>
<p>elevator3-&gt;on = 0;</p>
<p>elevator3-&gt;paused = 0;</p>
<p>elevator3-&gt;id = 3;</p>
<p></p>
<p>    for(i = 0; i&lt;floors+floors;i++)</p>
<p>{</p>
<p>button<i> = 0;</p>
<p>button2</i><i> = 0;</p>
<p>old</i><i> = 0;</i></p>
<p></p>
<p>    }</p>
<p></p>
<p>    //turn on interrupt 0 every 30ms? (controls elevator speed)</p>
<p>TIMSK=2;      //turn on timer 0 cmp match ISR</p>
<p>OCR0 = 250;   //set the compare re to 250 time ticks</p>
<p>//prescalar to 64 and turn on clear-on-match</p>
<p>TCCR0=0b00001011;</p>
<p></p>
<p>    //crank up the ISRs</p>
<p>#asm</p>
<p>sei</p>
<p>#endasm</p>
<p></p>
<p>}</p>
<p></p>
<p>//decides where the elevator should turn around</p>
<p>int checkdirection(elevator_t elevator)</p>
<p>{</p>
<p>int i;</p>
<p>int flag = 0;</p>
<p>for(i=elevator-&gt;floor;i&lt;=floors-1 &amp;&amp; i&gt;=0;i = i + elevator-&gt;traveldir) //scan for requests in direction of travel</p>
<p>{</p>
<p>//there are pick up requests to go the same way in the direction of travel</p>
<p>if((elevator-&gt;traveldir == 1 &amp;&amp; elevator-&gt;uprequests<i>) || (elevator-&gt;traveldir == -1 &amp;&amp; elevator-&gt;downrequests</i><i>))</p>
<p>{</p>
<p>//don&#8217;t change direction, set turnaround floor to top/bottom floor</p>
<p>if(elevator-&gt;traveldir == 1)</p>
<p>{</p>
<p>elevator-&gt;turnaround = floors-1;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator-&gt;turnaround = 0;</p>
<p>}</p>
<p>flag = 1;</p>
<p>//elevator-&gt;on = 1;</p>
<p>return 1;</p>
<p>}</p>
<p>//no pick up requests to go the same way, but drop off reqests in the direction of travel or pick up requests to go opposite way</p>
<p>else if((elevator-&gt;traveldir == 1 &amp;&amp; elevator-&gt;downrequests</i><i>) || (elevator-&gt;traveldir == -1 &amp;&amp; elevator-&gt;uprequests</i><i>) || (elevator-&gt;button</i><i>))</p>
<p>{</i></p>
<p></p>
<p>            //don&#8217;t change direction yet, set the turnaround floor ((CHECK THIS LOGIC))</p>
<p>if(elevator-&gt;button<i>)</p>
<p>elevator-&gt;turnaround = i; //highest floor with a drop off request</p>
<p>if(elevator-&gt;traveldir == 1 &amp;&amp; elevator-&gt;downrequests</i><i>)</p>
<p>elevator-&gt;turnaround = i; //highest floor that wants to go down</p>
<p>else if(elevator-&gt;traveldir == -1 &amp;&amp; elevator-&gt;uprequests</i><i>)</p>
<p>elevator-&gt;turnaround = i; //lowest floor that wants to go up</i></p>
<p></p>
<p>            flag = 1;</p>
<p>if(elevator-&gt;floor != elevator-&gt;turnaround) //don&#8217;t move if you need to turn on this floor</p>
<p>{</p>
<p>//elevator-&gt;on = 1;</p>
<p>return 1;</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>//no more requests at all in direction of travel, check for other requests</p>
<p>if(!flag)</p>
<p>{</p>
<p>for(i=elevator-&gt;floor-elevator-&gt;traveldir; i&lt;=floors-1 &amp;&amp; i&gt;=0; i = i &#8211; elevator-&gt;traveldir)</p>
<p>{</p>
<p>if(elevator-&gt;button<i> || elevator-&gt;uprequests</i><i> || elevator-&gt;downrequests</i><i>) //request on a floor above/below</p>
<p>{</p>
<p>elevator-&gt;turnaround = elevator-&gt;floor; //turn around now!</p>
<p>return 0;</p>
<p>}</p>
<p>}</p>
<p>//don&#8217;t change direction if we get out of that loop</p>
<p>if(elevator-&gt;traveldir == 1)</p>
<p>{</p>
<p>elevator-&gt;turnaround = floors-1;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator-&gt;turnaround = 0;</p>
<p>}</p>
<p>}</p>
<p>return 0;</p>
<p>}</i></p>
<p></p>
<p>//Function looks though current button requests and determines where to send elevators</p>
<p>//Each elevator follows SCAN algorithm on requests it is given</p>
<p>//Ideally, function resets button variables when it assigns requests to elevators.</p>
<p>//This function is responsible to only send elevator to floor if heading in correct direction</p>
<p>//(in terms of picking up passengers, dropping them off doesn&#8217;t matter)</p>
<p>void addRequests()</p>
<p>{</p>
<p>//Just send 1 elevator to do everything!</p>
<p>if(mode==trivial)</p>
<p>{</p>
<p>algorithm1(elevator1);</p>
<p>}</p>
<p>else if(mode==simple)</p>
<p>{</p>
<p>algorithm1(elevator1);</p>
<p>algorithm1(elevator2);</p>
<p>algorithm1(elevator3);</p>
<p>}</p>
<p>else if(mode == normal)</p>
<p>{</p>
<p>algorithm2();</p>
<p>}</p>
<p>else if(mode == sabbath)</p>
<p>{</p>
<p>if(elevator3-&gt;floor == (floors+floors-2)/3  &amp;&amp; !elevator3-&gt;paused)</p>
<p>ready2 = 1;</p>
<p>if(elevator2-&gt;floor == (floors+floors-2)/3  &amp;&amp; !elevator2-&gt;paused)</p>
<p>ready1 = 1;</p>
<p>if(ready1)</p>
<p>algorithm3(elevator1);</p>
<p>if(ready2)</p>
<p>algorithm3(elevator2);</p>
<p>algorithm3(elevator3);</p>
<p>}</p>
<p>}</p>
<p></p>
<p>void oneStep(elevator_t elevator) //main state machine</p>
<p>{</p>
<p>int x,i, flag = 0;</p>
<p>if(elevator-&gt;paused)</p>
<p>{</p>
<p>if((elevator-&gt;uprequests[elevator-&gt;floor] &amp;&amp; elevator-&gt;traveldir == 1) ||</p>
<p>(elevator-&gt;downrequests[elevator-&gt;floor] &amp;&amp; elevator-&gt;traveldir == -1) || elevator-&gt;button[elevator-&gt;floor])</p>
<p>{</p>
<p>i = elevator-&gt;floor;</p>
<p>//printf(&#8220;Elevator #%i Doors remaining open (button held down)rn&#8221;,elevator-&gt;id);</p>
<p>elevator-&gt;paused = pause;</p>
<p>//request satisfied</p>
<p>if(elevator-&gt;traveldir == 1) //this could be wrong</p>
<p>{</p>
<p>elevator-&gt;uprequests<i> = 0;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator-&gt;downrequests</i><i> = 0;</p>
<p>}</p>
<p>button2[((i&lt;&lt;2) + 1 + elevator-&gt;traveldir)&gt;&gt;1] = 0;</p>
<p>button[((i&lt;&lt;2) + 1 + elevator-&gt;traveldir)&gt;&gt;1] = 0;</p>
<p>elevator-&gt;button[elevator-&gt;floor] = 0;</p>
<p>}</i></p>
<p></p>
<p>        elevator-&gt;paused&#8211;;</p>
<p>if(elevator-&gt;paused==0)</p>
<p>{</p>
<p>//printf(&#8220;Elevator #%i Doors closingrn&#8221;,elevator-&gt;id);</p>
<p>printf(&#8220;closing%irn&#8221;,elevator-&gt;id);</p>
<p>}</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>//just hit a floor or idling on floor</p>
<p>if(elevator-&gt;count==floorsize || elevator-&gt;count == 0)</p>
<p>{</p>
<p>if(elevator-&gt;count == 0) //idling on a floor</p>
<p>{</p>
<p>if(elevator-&gt;button[elevator-&gt;floor])</p>
<p>{</p>
<p>flag = 1;</p>
<p>elevator-&gt;button[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>}</p>
<p>//just hit a floor, update floor number and display it</p>
<p>if(elevator-&gt;count==floorsize)</p>
<p>{</p>
<p>elevator-&gt;floor = elevator-&gt;floor + elevator-&gt;traveldir;</p>
<p>//if we are going to stop at this floor, update button</p>
<p>//before calling checkdirection</p>
<p>if(elevator-&gt;button[elevator-&gt;floor])</p>
<p>{</p>
<p>flag = 1;</p>
<p>elevator-&gt;button[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>checkdirection(elevator);</p>
<p>if(elevator-&gt;floor==elevator-&gt;turnaround)</p>
<p>elevator-&gt;traveldir = 0 &#8211; elevator-&gt;traveldir;</p>
<p></p>
<p>                printf(&#8220;arrived%i%02irn&#8221;,elevator-&gt;id,elevator-&gt;floor);</p>
<p>elevator-&gt;count = 0;</p>
<p>}</p>
<p>//passenger wants to get off on this floor, so elevator needs to stop</p>
<p>if(flag)</p>
<p>{</p>
<p>printf(&#8220;opening%i%irn&#8221;,elevator-&gt;id,elevator-&gt;traveldir+1);</p>
<p>elevator-&gt;paused = pause;</p>
<p>//requests to get on in same direction satisfied</p>
<p>if(elevator-&gt;floor == elevator-&gt;turnaround) //elevator is turning around here, can satisfy other elevator requests</p>
<p>{</p>
<p>if(elevator-&gt;traveldir == 1)</p>
<p>{</p>
<p>elevator1-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>elevator2-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>elevator3-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator1-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>elevator2-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>elevator3-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>x = ((elevator-&gt;floor&lt;&lt;2) + 1 &#8211; elevator-&gt;traveldir)&gt;&gt;1;</p>
<p>}</p>
<p>else //elevator is continuing on, can satisfy other elevator requests</p>
<p>{</p>
<p>if(elevator-&gt;traveldir == 1)</p>
<p>{</p>
<p>elevator1-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>elevator2-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>elevator3-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator1-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>elevator2-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>elevator3-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p></p>
<p>                    //turn off outside button</p>
<p>x = ((elevator-&gt;floor&lt;&lt;2) + 1 + elevator-&gt;traveldir)&gt;&gt;1;</p>
<p>}</p>
<p>button2[x] = 0;</p>
<p>}</p>
<p>//there is an outside request in the direction of travel, open to pick them up</p>
<p>if((elevator-&gt;traveldir == 1 &amp;&amp; elevator-&gt;uprequests[elevator-&gt;floor]) || (elevator-&gt;traveldir == -1 &amp;&amp; elevator-&gt;downrequests[elevator-&gt;floor]) )</p>
<p>{</p>
<p>//printf(&#8220;Elevator #%i doors opening to pick someone uprn&#8221;,elevator-&gt;id);</p>
<p>printf(&#8220;opening%i%irn&#8221;,elevator-&gt;id,elevator-&gt;traveldir+1);</p>
<p>elevator-&gt;paused = pause;</p>
<p>//request to pick up on this floor satisfied</p>
<p>if(elevator-&gt;traveldir == 1)</p>
<p>{</p>
<p>elevator-&gt;uprequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>elevator-&gt;downrequests[elevator-&gt;floor] = 0;</p>
<p>}</p>
<p></p>
<p>                //turn  off outside button</p>
<p>x = ((elevator-&gt;floor&lt;&lt;2) + 1 + elevator-&gt;traveldir)&gt;&gt;1;</p>
<p>button2[x] = 0;</p>
<p>button[x] = 0;</p>
<p>}</p>
<p>if(!elevator-&gt;paused)</p>
<p>{</p>
<p>x = checkdirection(elevator); //we need to check again after new passengers have gotten on.</p>
<p>if(elevator-&gt;floor == elevator-&gt;turnaround) //this is where we turn around</p>
<p>{</p>
<p>elevator-&gt;traveldir = 0 &#8211; elevator-&gt;traveldir; //switch directions</p>
<p>//printf(&#8220;Switched directions to %irn&#8221;,elevator-&gt;traveldir);</p>
<p>}</p>
<p>if(x)</p>
<p>elevator-&gt;on = 1;</p>
<p>}</p>
<p>}</p>
<p>//don&#8217;t turn around mid-floor</p>
<p>else</p>
<p>{</p>
<p>elevator-&gt;on = 1;</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p></p>
<p>int hasrequests(elevator_t elevator, int requestfloor, int requestdirection)//checks if an elevator has requests and returns 200*numrequests</p>
<p>{</p>
<p>int i, sum = 0;</p>
<p>if(elevator-&gt;paused &amp;&amp; elevator-&gt;floor != requestfloor) //add distance if elevator is stopped on another floor</p>
<p>sum = sum + 200;</p>
<p>for(i=0; i&lt;floors; i++)</p>
<p>{</p>
<p>if(elevator-&gt;downrequests<i>||elevator-&gt;uprequests</i><i>||elevator-&gt;button</i><i>)</p>
<p>{</p>
<p>//add distance if elevator has a request on another floor or in the opposite direction</p>
<p>if(i != requestfloor || (elevator-&gt;uprequests</i><i> &amp;&amp; requestdirection == -1) || (elevator-&gt;downrequests</i><i> &amp;&amp; requestdirection == 1))</p>
<p>sum = sum + 200;</p>
<p>}</p>
<p>}</p>
<p>return sum;</i></p>
<p></p>
<p>}</p>
<p></p>
<p>int distance(elevator_t elevator, int requestfloor, int requestdirection)</p>
<p>{</p>
<p>int elevatorfloor, requests;</p>
<p>requests = hasrequests(elevator,requestfloor,requestdirection);</p>
<p>elevatorfloor = elevator-&gt;floor;</p>
<p>if(!requests)</p>
<p>return abs(elevator-&gt;floor &#8211; requestfloor);</p>
<p>//if elevator is moving then its floor must be updated to the next floor it will pass</p>
<p>if(!elevator-&gt;paused)</p>
<p>elevatorfloor = elevatorfloor + elevator-&gt;traveldir;</p>
<p>//worst and best cases, elevator heading in same direction as request</p>
<p>if(elevator-&gt;traveldir==requestdirection)</p>
<p>{</p>
<p>//best case, elevator on way to request</p>
<p>if((elevator-&gt;traveldir==1 &amp;&amp; elevatorfloor&lt;=requestfloor)||(elevator-&gt;traveldir==-1 &amp;&amp; elevatorfloor&gt;=requestfloor))</p>
<p>{</p>
<p>return requests + abs(requestfloor &#8211; elevatorfloor);</p>
<p>}</p>
<p>//worst case, elevator needs to switch direction twice</p>
<p>else</p>
<p>{</p>
<p>return requests + floors+floors &#8211; abs(requestfloor &#8211; elevatorfloor);</p>
<p>}</p>
<p>}</p>
<p>//elevator needs to switch direction once</p>
<p>else</p>
<p>{</p>
<p>//elevator heading to top floor</p>
<p>if(elevator-&gt;traveldir==1)</p>
<p>{</p>
<p>return requests + (floors-1-elevatorfloor)+(floors-1-requestfloor);</p>
<p>}</p>
<p>//elevator heading to bottom floor</p>
<p>else</p>
<p>{</p>
<p>return requests + elevatorfloor+requestfloor;</p>
<p>}</p>
<p>}</p>
<p></p>
<p>}</p>
<p></p>
<p>void algorithm1(elevator_t elevator) //for trivial and simple modes</p>
<p>{</p>
<p>int i;</p>
<p>for(i=1;i&lt;floors+floors-1;i++) //add all outside requests to elevator 1 for now</p>
<p>{</p>
<p>if(button<i>) //button is pressed</p>
<p>{</p>
<p>if(i%2 == 1) //this is an up button</p>
<p>{</p>
<p>elevator-&gt;uprequests[i&gt;&gt;1] = 1;</p>
<p>}</p>
<p>else //this is a down button</p>
<p>{</p>
<p>elevator-&gt;downrequests[i&gt;&gt;1] = 1;</p>
<p>}</p>
<p>if(mode!=trivial &amp;&amp; elevator-&gt;id=<img src="smileys/smile3.gif" width="" height="" alt="=3" title="=3" class="bbcode_smiley" />)</p>
<p>button</i><i> = 0; //button turns off, request received</i></p>
<p></p>
<p>        }</p>
<p>}</p>
<p>}</p>
<p></p>
<p>void algorithm2() //for normal mode</p>
<p>{</p>
<p>int i;</p>
<p>int d1;</p>
<p>int d2;</p>
<p>int d3;</p>
<p>elevator_t choice;</p>
<p>for(i=1;i&lt;floors+floors-1;i++) //loop through outside buttons</p>
<p>{</p>
<p>if(button<i>) //button is pressed</p>
<p>{</p>
<p>//if elevator is already open on this floor, give request to that elevator</p>
<p>if(elevator1-&gt;paused &amp;&amp; elevator1-&gt;floor == (i&gt;&gt;1) &amp;&amp; elevator1-&gt;traveldir==i%2)</p>
<p>{</p>
<p>if(i%2 == 1) //up button</p>
<p>elevator1-&gt;uprequests[elevator1-&gt;floor] = 1;</p>
<p>else //down button</p>
<p>elevator1-&gt;downrequests[elevator1-&gt;floor] = 1;</p>
<p>}</p>
<p>else if(elevator2-&gt;paused &amp;&amp; elevator2-&gt;floor == (i&gt;&gt;1) &amp;&amp; elevator2-&gt;traveldir==i%2)</p>
<p>{</p>
<p>if(i%2 == 1) //up button</p>
<p>elevator2-&gt;uprequests[elevator2-&gt;floor] = 1;</p>
<p>else //down button</p>
<p>elevator2-&gt;downrequests[elevator2-&gt;floor] = 1;</p>
<p>}</p>
<p>else if(elevator3-&gt;paused &amp;&amp; elevator3-&gt;floor == (i&gt;&gt;1) &amp;&amp; elevator3-&gt;traveldir==i%2)</p>
<p>{</p>
<p>if(i%2 == 1) //up button</p>
<p>elevator3-&gt;uprequests[elevator3-&gt;floor] = 1;</p>
<p>else //down button</p>
<p>elevator3-&gt;downrequests[elevator3-&gt;floor] = 1;</p>
<p>}</p>
<p>//otherwise, calculate distances and compare</p>
<p>else</p>
<p>{</p>
<p>if(i%2 == 1) //this is an up button</p>
<p>{</p>
<p>d1 = distance(elevator1,i&gt;&gt;1,1);</p>
<p>d2 = distance(elevator2,i&gt;&gt;1,1);</p>
<p>d3 = distance(elevator3,i&gt;&gt;1,1);</p>
<p>}</p>
<p>else //this is a down button</p>
<p>{</p>
<p>d1 = distance(elevator1,i&gt;&gt;1,-1);</p>
<p>d2 = distance(elevator2,i&gt;&gt;1,-1);</p>
<p>d3 = distance(elevator3,i&gt;&gt;1,-1);</p>
<p>}</p>
<p>if(d1&lt;=d2 &amp;&amp; d1&lt;=d3)</p>
<p>choice = elevator1;</p>
<p>else if(d2&lt;=d3)</p>
<p>choice = elevator2;</p>
<p>else</p>
<p>choice = elevator3;</i></p>
<p></p>
<p>                if(i%2 == 1) //this is an up button</p>
<p>{</p>
<p>choice-&gt;uprequests[i&gt;&gt;1] = 1;</p>
<p>}</p>
<p>else //this is a down button</p>
<p>{</p>
<p>choice-&gt;downrequests[i&gt;&gt;1] = 1;</p>
<p>}</p>
<p>}</p>
<p>button<i> = 0;</p>
<p>}</p>
<p>}</p>
<p>}</i></p>
<p></p>
<p>void algorithm3(elevator_t elevator) //for sabbath mode</p>
<p>{</p>
<p>int i;</p>
<p>for(i = 0; i&lt; floors; i++)</p>
<p>{</p>
<p>if((elevator-&gt;floor != i))</p>
<p>{</p>
<p>if(i&gt;0)</p>
<p>elevator-&gt;downrequests<i> = 1;</p>
<p>if(i&lt;floors-1)</p>
<p>elevator-&gt;uprequests</i><i> = 1;</p>
<p>}</i></p>
<p></p>
<p>    }</p>
<p>}</p>
<p></p>
<p>void poll2()</p>
<p>{</p>
<p>int x;</p>
<p>elevator_t elevator = NULL;</p>
<p>if(!serialFlag)</p>
<p>return;</p>
<p>serialFlag = 0;</p>
<p>buffer[bufferindex] = getchar();</p>
<p>if(buffer[bufferindex]==&#8217;z&#8217;)</p>
<p>{</p>
<p>if(bufferindex&gt;<img src="smileys/smile3.gif" width="" height="" alt="=3" title="=3" class="bbcode_smiley" /> &amp;&amp; buffer[bufferindex-3]==&#8217;o&#8217;)</p>
<p>{</p>
<p>x = ((int)buffer[bufferindex-2]-48)*10+(int)buffer[bufferindex-1]-48;</p>
<p>if (x&gt;0 &amp;&amp; x&lt;2*floors-1 &amp;&amp; !button2[x])</p>
<p>{</p>
<p>button[x] = 1;</p>
<p>button2[x] = 1;</p>
<p>}</p>
<p>}</p>
<p>else if(bufferindex&gt;=4 &amp;&amp; buffer[bufferindex-4]==&#8217;i&#8217;)</p>
<p>{</p>
<p>x = ((int)buffer[bufferindex-2]-48)*10+(int)buffer[bufferindex-1]-48;</p>
<p>if(buffer[bufferindex-3]==&#8217;1&#8242;)</p>
<p>elevator = elevator1;</p>
<p>else if(buffer[bufferindex-3]==&#8217;2&#8242;)</p>
<p>elevator = elevator2;</p>
<p>else if(buffer[bufferindex-3]==&#8217;3&#8242;)</p>
<p>elevator = elevator3;</p>
<p></p>
<p>            if(elevator != NULL &amp;&amp; x&gt;=0 &amp;&amp; x&lt; floors)</p>
<p>{</p>
<p>elevator-&gt;button[x] = 1;</p>
<p>}</p>
<p>}</p>
<p>bufferindex=0;</p>
<p>}</p>
<p>else</p>
<p>bufferindex++;</p>
<p></p>
<p>    if(bufferindex&gt;=<img src="smileys/bigeyes.gif" width="" height="" alt="8)" title="8)" class="bbcode_smiley" /></p>
<p>bufferindex = 0;</p>
<p>}
</p>
<p></p>

		
	</div><!-- .bbp-reply-content -->

</div><!-- .reply -->
</li>

		
	</li><!-- .bbp-body -->

	<li class="bbp-footer">

		<div class="bbp-reply-author">Author</div>

		<div class="bbp-reply-content">

			
				Posts
			
		</div><!-- .bbp-reply-content -->

	</li><!-- .bbp-footer -->

</ul><!-- #topic-86808-replies -->


			

<div class="bbp-pagination">
	<div class="bbp-pagination-count">

		
	</div>

	<div class="bbp-pagination-links">

		
	</div>
</div>


		
		


	<div id="no-reply-86808" class="bbp-no-reply">
		<div class="bbp-template-notice">
			<p>You must be logged in to reply to this topic.</p>
		</div>
	</div>



	
	
</div>
		</div>
		        		
&nbsp;</div> <!--end page main-->
	

&nbsp;
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.geeksforgeeks.org%2Fforums%2Ftopic%2Felevator-simulation%2F&layout=button_count&show_faces=false&width=90&action=like&colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:90px; height:20px"></iframe>
<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/" data-text="elevator simulation" data-count="horizontal" data-via="jakerutter">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<g:plusone size="medium" href="http://www.geeksforgeeks.org/forums/topic/elevator-simulation/"></g:plusone>
<!-- Place this render call where appropriate -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
&nbsp;
</div> <!--end page-->

   
		<div class="clear"></div>

		<div id="footer">
		
		    <div class="xhtml">
                        @geeksforgeeks, <a href="http://creativecommons.org/licenses/by-nc-nd/2.5/in/deed.en_US" title="Valid XHTML Strict 1.0">Some rights reserved</a>  <a href="http://www.geeksforgeeks.org/about/contact-us/"> &nbsp; &nbsp; &nbsp; &nbsp;Contact Us!</a>

		    </div>
		    
		    <div class="credits">
			  Powered by <a href="http://wordpress.org">WordPress </a> &amp; <a href="http://mootools.net/" title="Mootools JavaScript Framework">MooTools</a>, customized by geeksforgeeks team </div>
			  
		   <div class="clear"></div>						                            
		   
		</div> <!--end footer-->  
        
		        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'geeksforgeeks';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('rel'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        <script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/js/editor.js?ver=2.5.4-5380'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var bbpTopicJS = {"bbp_ajaxurl":"http:\/\/www.geeksforgeeks.org\/forums\/topic\/elevator-simulation\/?bbp-ajax=true","generic_ajax_error":"Something went wrong. Refresh your browser and try again.","is_user_logged_in":"","fav_nonce":"c93f8020a6","subs_nonce":"ebc66ed222"};
/* ]]> */
</script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/js/topic.js?ver=2.5.4-5380'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/js/reply.js?ver=2.5.4-5380'></script>
				  
		</div> <!--end wrapper-->
        <div id="ajaxSpinner"></div> <!--For AJAX spinner holder-->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12148232-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
	</body>

</html>
<!-- Dynamic page generated in 0.213 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-11-28 01:52:03 -->

<!-- Compression = gzip -->
<!-- super cache -->