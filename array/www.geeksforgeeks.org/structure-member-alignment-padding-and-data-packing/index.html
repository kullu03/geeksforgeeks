<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
       <title>Structure Member Alignment, Padding and Data Packing - GeeksforGeeks</title>
       <style type="text/css" media="screen">
          @import url('http://d2o58evtke57tz.cloudfront.net/wp-content/themes/minimoo/style.css');
    </style>
      <link href="http://d2o58evtke57tz.cloudfront.net/wp-content/themes/minimoo/favicon.ico" rel="shortcut icon" />    
    
<!-- This site is optimized with the Yoast WordPress SEO plugin v1.7.1 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Structure Member Alignment, Padding and Data Packing - GeeksforGeeks" />
<meta property="og:description" content="What do we mean by data alignment, structure packing and padding? Predict the output of following program. Before moving further, write down your answer on a paper, and read on. If you urge to see explanation, you may miss to understand any lacuna in your analogy. Also read the post by Kartik. Data Alignment: Every &hellip;" />
<meta property="og:url" content="http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/" />
<meta property="og:site_name" content="GeeksforGeeks" />
<meta property="article:section" content="Articles" />
<meta property="article:section" content="C/C++ Puzzles" />
<meta property="article:published_time" content="2011-01-01T14:26:46+00:00" />
<meta property="article:modified_time" content="2013-05-01T22:02:05+00:00" />
<meta property="og:updated_time" content="2013-05-01T22:02:05+00:00" />
<meta property="og:image" content="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment1.gif" />
<meta property="og:image" content="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment2.gif" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel='stylesheet' id='wp-quicklatex-format-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-quicklatex/css/quicklatex-format.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/css/bbpress.css?ver=2.5.4-5380' type='text/css' media='screen' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/wp-quicklatex/js/wp-quicklatex-frontend.js?ver=1.0'></script>

<!-- Bad Behavior 2.2.16 run time: 1.557 ms -->
<script type="text/javascript">
<!--
function bb2_addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}

bb2_addLoadEvent(function() {
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1417110776 202.65.142.66';
			document.forms[i].appendChild(myElement);
		}
	}
});
// --></script>
		<style type="text/css" id="syntaxhighlighteranchor"></style>
   <meta name="google-site-verification" content="rHK2v8_zzuAZQY8JHAzbllDN8u-aQxcn2Kqnp67Old0" />
</head>

<body>
<!-- o4dI0sCXUgoSONabbd8mbZ4SA3E -->    
    <div id="wrapper">
        <div class="blog-info">
                <h1 class="blog-title">
                <a href="http://www.geeksforgeeks.org" title="GeeksforGeeks">GeeksforGeeks</a>
            </h1>
       
            <div class="blog-description">
                A computer science portal for geeks            </div>
        </div>
        <b><p>  <h2 align="right"> <a href="http://geeksquiz.com/">GeeksQuiz</a></h2> 
   <a href="http://www.geeksforgeeks.org/wp-login.php">Login</a> 
         </p></b>  
         
         <div class="clear"></div>         
              
                     
            <div id="menu">   
                 <ul>
 <li><a href="http://www.geeksforgeeks.org">Home</a></li>
  <li><a href="http://www.geeksforgeeks.org/fundamentals-of-algorithms/">Algorithms</a></li>
 <li><a href="http://www.geeksforgeeks.org/data-structures/">DS</a></li>
  <li><a href="http://www.geeksforgeeks.org/gate-corner/">GATE</a></li>
  <li><a href="http://www.geeksforgeeks.org/about/interview-corner/">Interview Corner</a></li>
  <li><a href="http://www.geeksforgeeks.org/forums/">Q&A</a></li>
  <li><a href="http://www.geeksforgeeks.org/c/">C</a></li>
  <li><a href="http://www.geeksforgeeks.org/c-plus-plus/">C++</a></li>
  <li><a href="http://www.geeksforgeeks.org/java/">Java</a></li>
  <li><a href="http://www.geeksforgeeks.org/books/">Books</a></li>
  <li><a href="http://www.geeksforgeeks.org/contribute/">Contribute</a></li>
  <li><a href="http://www.geeksforgeeks.org/contribute/ask-a-question/">Ask a Q</a></li>
  <li><a href="http://www.geeksforgeeks.org/about/">About</a></li>
            </ul>

               
            <div class="clear"></div>     
        </div>
             <div id="navmenu">
				<ul id="menu" style="padding:0; margin:0;">
						<li class="cat-item cat-item-3"><a href="http://www.geeksforgeeks.org/category/c-arrays/" title="Questions regarding Arrays">Array</a>
</li>	

	<li class="cat-item cat-item-17"><a href="http://www.geeksforgeeks.org/category/bit-magic/" title="View all posts filed under Bit Magic">Bit Magic</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://www.geeksforgeeks.org/category/c-puzzles/" title="View all posts filed under C/C++ Puzzles">C/C++</a>
</li>

<li class="cat-item cat-item-18"><a href="http://www.geeksforgeeks.org/category/articles/" title="View all posts filed under Articles">Articles</a>
</li>

	<li class="cat-item cat-item-67"><a href="http://www.geeksforgeeks.org/category/gfact/" title="View all posts filed under GFacts">GFacts</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://www.geeksforgeeks.org/category/linked-list/" title="Linked List problems">Linked List</a>
</li>
	<li class="cat-item cat-item-66"><a href="http://www.geeksforgeeks.org/category/multiple-choice-question/" title="View all posts filed under MCQ">MCQ</a>

</li>
	<li class="cat-item cat-item-4"><a href="http://www.geeksforgeeks.org/category/c-programs/" title="Miscellaneous">Misc</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://www.geeksforgeeks.org/category/program-output/" title="View all posts filed under Output">Output</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://www.geeksforgeeks.org/category/c-strings/" title="Questions related to strings">String</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://www.geeksforgeeks.org/category/tree/" title="View all posts filed under Trees">Tree</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://www.geeksforgeeks.org/category/graph/" title="View all posts filed under Graph">Graph</a>
</li>
</ul>
        </div>
             <div id="content">	   	
	<div class="post" id="post">
							<div class="post-info">			
					<div class="post-title-info">
						<h2 class="post-title">Structure Member Alignment, Padding and Data Packing</h2>
					</div>			
					<div class="clear"></div>				  
				<div class="post-content" id="post-content">
					<p>What do we mean by data alignment, structure packing and padding?</p>
<p>Predict the output of following program.<span id="more-9705"></span></p>
<pre class="brush: cpp; title: ; notranslate" title="">
#include &lt;stdio.h&gt;

// Alignment requirements
// (typical 32 bit machine)

// char         1 byte
// short int    2 bytes
// int          4 bytes
// double       8 bytes

// structure A
typedef struct structa_tag
{
   char        c;
   short int   s;
} structa_t;

// structure B
typedef struct structb_tag
{
   short int   s;
   char        c;
   int         i;
} structb_t;

// structure C
typedef struct structc_tag
{
   char        c;
   double      d;
   int         s;
} structc_t;

// structure D
typedef struct structd_tag
{
   double      d;
   int         s;
   char        c;
} structd_t;

int main()
{
   printf(&quot;sizeof(structa_t) = %d\n&quot;, sizeof(structa_t));
   printf(&quot;sizeof(structb_t) = %d\n&quot;, sizeof(structb_t));
   printf(&quot;sizeof(structc_t) = %d\n&quot;, sizeof(structc_t));
   printf(&quot;sizeof(structd_t) = %d\n&quot;, sizeof(structd_t));

   return 0;
}
</pre>
<p>Before moving further, write down your answer on a paper, and read on. If you urge to see explanation, you may miss to understand any lacuna in your analogy. Also read the <a href="http://geeksforgeeks.org/forum/topic/what-is-the-output-2" target="_blank">post</a> by Kartik.</p>
<p><strong>Data Alignment:</strong></p>
<p>Every data type in C/C++ will have alignment requirement (infact it is mandated by processor architecture, not by language). A processor will have processing word length as that of data bus size. On a 32 bit machine, the processing word size will be 4 bytes.</p>
<p><a href="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment1.gif"><img class="aligncenter size-full wp-image-9731" alt="" src="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment1.gif" width="590" height="287" /></a></p>
<p><strong> </strong>Historically memory is byte addressable and arranged sequentially. If the memory is arranged as single bank of one byte width, the processor needs to issue 4 memory read cycles to fetch an integer. It is more economical to read all 4 bytes of integer in one memory cycle. To take such advantage, the memory will be arranged as group of 4 banks as shown in the above figure.</p>
<p>The memory addressing still be sequential. If bank 0 occupies an address X, bank 1, bank 2 and bank 3 will be at (X + 1), (X + 2) and (X + 3) addresses. If an integer of 4 bytes is allocated on X address (X is multiple of 4), the processor needs only one memory cycle to read entire integer.</p>
<p>Where as, if the integer is allocated at an address other than multiple of 4, it spans across two rows of the banks as shown in the below figure. Such an integer requires two memory read cycle to fetch the data.</p>
<p><a href="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment2.gif"><img class="aligncenter size-full wp-image-9732" alt="" src="http://geeksforgeeks.org/wp-content/uploads/MemoryAlignment2.gif" width="420" height="123" /></a></p>
<p>A variable&#8217;s <em><strong>data alignment</strong></em> deals with the way the data stored in these banks. For example, the natural alignment of <em><strong>int</strong></em> on 32-bit machine is 4 bytes. When a data type is naturally aligned, the CPU fetches it in minimum read cycles.</p>
<p>Similarly, the natural alignment of <strong><em>short int</em></strong> is 2 bytes. It means, a <em><strong>short int</strong></em> can be stored in bank 0 &#8211; bank 1 pair or bank 2 &#8211; bank 3 pair. A <strong><em>double</em></strong> requires 8 bytes, and occupies two rows in the memory banks. Any misalignment of <strong><em>double</em></strong> will force more than two read cycles to fetch <strong><em>double</em></strong> data.</p>
<p>Note that a <strong>double</strong> variable will be allocated on 8 byte boundary on 32 bit machine and requires two memory read cycles. On a 64 bit machine, based on number of banks, <strong>double</strong> variable will be allocated on 8 byte boundary and requires only one memory read cycle.</p>
<p><strong>Structure Padding:</strong></p>
<p><strong> </strong>In C/C++ a structures are used as data pack. It doesn&#8217;t provide any data encapsulation or data hiding features (C++ case is an exception due to its semantic similarity with classes).</p>
<p>Because of the alignment requirements of various data types, every member of structure should be naturally aligned. The members of structure allocated sequentially increasing order. Let us analyze each struct declared in the above program.</p>
<p><strong>Output of Above Program:</strong></p>
<p><strong><span style="color: #3366ff">For the sake of convenience, assume every structure type variable is allocated on 4 byte boundary (say 0x0000), i.e. the base address of structure is multiple of 4 (need not necessary always, see explanation of structc_t).</span></strong></p>
<p><strong><span style="color: #3366ff">structure A</span></strong></p>
<p><span style="color: #3366ff">The <em>structa_t</em> first element is <em>char</em> which is one byte aligned, followed by <em>short int</em>. short int is 2 byte aligned. If the the short int element is immediately allocated after the char element, it will start at an odd address boundary. The compiler will insert a padding byte after the char to ensure short int will have an address multiple of 2 (i.e. 2 byte aligned). The total size of structa_t will be sizeof(char) + 1 (padding) + sizeof(short), 1 + 1 + 2 = 4 bytes.</span></p>
<p><strong><span style="color: #3366ff">structure B</span></strong></p>
<p><span style="color: #3366ff">The first member of <em>structb_t</em> is short int followed by char. Since char can be on any byte boundary no padding required in between short int and char, on total they occupy 3 bytes. The next member is int. If the int is allocated immediately, it will start at an odd byte boundary. We need 1 byte padding after the char member to make the address of next int member is 4 byte aligned. On total, the <em>structb_t</em> requires 2 + 1 + 1 (padding) + 4 = 8 bytes.</span></p>
<p><span style="color: #808080"><strong><span style="color: #3366ff">structure C &#8211; Every structure will also have alignment requirements</span></strong></span></p>
<p><span style="color: #3366ff">Applying same analysis, <em>structc_t</em> needs sizeof(char) + 7 byte padding + sizeof(double) + sizeof(int) = 1 + 7 + 8 + 4 = 20 bytes. However, the sizeof(structc_t) will be 24 bytes. It is because, along with structure members, structure type variables will also have natural alignment. Let us understand it by an example. </span><span style="color: #3366ff">Say, we declared an array of structc_t as shown below</span></p>
<pre><span style="color: #3366ff">structc_t structc_array[3];</span></pre>
<p><span style="color: #3366ff">Assume, the base address of <em>structc_array</em> is 0x0000 for easy calculations. If the structc_t occupies 20 (0x14) bytes as we calculated, the second structc_t array element (indexed at 1) will be at 0x0000 + 0x0014 = 0x0014. It is the start address of index 1 element of array. The double member of this structc_t will be allocated on 0x0014 + 0x1 + 0x7 = 0x001C (decimal 28) which is not multiple of 8 and conflicting with the alignment requirements of double. As we mentioned on the top, the alignment requirement of double is 8 bytes.</span></p>
<p><span style="color: #3366ff">Inorder to avoid such misalignment, compiler will introduce alignment requirement to every structure. It will be as that of the largest member of the structure. In our case alignment of structa_t is 2, structb_t is 4 and structc_t is 8. If we need nested structures, the size of largest inner structure will be the alignment of immediate larger structure.</span></p>
<p><span style="color: #3366ff">In structc_t of the above program, there will be padding of 4 bytes after int member to make the structure size multiple of its alignment. Thus the sizeof (structc_t) is 24 bytes. It guarantees correct alignment even in arrays. You can cross check.</span></p>
<p><strong><span style="color: #3366ff">structure D &#8211; How to Reduce Padding?</span></strong></p>
<p><span style="color: #3366ff">By now, it may be clear that padding is unavoidable. There is a way to minimize padding. The programmer should declare the structure members in their increasing/decreasing order of size. An example is structd_t given in our code, whose size is 16 bytes in lieu of 24 bytes of structc_t.</span></p>
<p><strong>What is structure packing?</strong></p>
<p>Some times it is mandatory to avoid padded bytes among the members of structure. For example, reading contents of ELF file header or BMP or JPEG file header. We need to define a structure similar to that of the header layout and map it. However, care should be exercised in accessing such members. Typically reading byte by byte is an option to avoid misaligned exceptions. There will be hit on performance.</p>
<p>Most of the compilers provide non standard extensions to switch off the default padding like pragmas or command line switches. Consult the documentation of respective compiler for more details.</p>
<p><strong>Pointer Mishaps:</strong></p>
<p>There is possibility of potential error while dealing with pointer arithmetic. For example, dereferencing a generic pointer (void *) as shown below can cause misaligned exception,</p>
<pre>// Deferencing a generic pointer (not safe)
// There is no guarantee that pGeneric is integer aligned
*(int *)pGeneric;</pre>
<p>It is possible above type of code in programming. If the pointer <em>pGeneric</em> is not aligned as per the requirements of casted data type, there is possibility to get misaligned exception.</p>
<p>Infact few processors will not have the last two bits of address decoding, and there is no way to access <em>misaligned</em> address. The processor generates misaligned exception, if the programmer tries to access such address.</p>
<p><strong>A note on malloc() returned pointer</strong></p>
<p>The pointer returned by malloc() is <em>void *</em>. It can be converted to any data type as per the need of programmer. The implementer of malloc() should return a pointer that is aligned to maximum size of primitive data types (those defined by compiler). It is usually aligned to 8 byte boundary on 32 bit machines.</p>
<p><strong>Object File Alignment, Section Alignment, Page Alignment</strong></p>
<p>These are specific to operating system implementer, compiler writers and are beyond the scope of this article. Infact, I don&#8217;t have much information.</p>
<p><strong>General Questions:</strong></p>
<p><span style="color: #0000ff">1. Is alignment applied for stack?</span></p>
<p>Yes. The stack is also memory. The system programmer should load the stack pointer with a memory address that is properly aligned. Generally, the processor won&#8217;t check stack alignment, it is the programmer&#8217;s responsibility to ensure proper alignment of stack memory. Any misalignment will cause run time surprises.</p>
<p>For example, if the processor word length is 32 bit, stack pointer also should be aligned to be multiple of 4 bytes.</p>
<p><span style="color: #0000ff">2. If <em>char</em> data is placed in a bank other bank 0, it will be placed on wrong data lines during memory read. How the processor handles <em>char</em> type?</span></p>
<p>Usually, the processor will recognize the data type based on instruction (e.g. LDRB on ARM processor). Depending on the bank it is stored, the processor shifts the byte onto least significant data lines.</p>
<p><span style="color: #0000ff">3. When arguments passed on stack, are they subjected to alignment?</span></p>
<p>Yes. The compiler helps programmer in making proper alignment. For example, if a 16-bit value is pushed onto a 32-bit wide stack, the value is automatically padded with zeros out to 32 bits. Consider the following program.</p>
<pre class="brush: cpp; title: ; notranslate" title="">
void argument_alignment_check( char c1, char c2 )
{
   // Considering downward stack
   // (on upward stack the output will be negative)
   printf(&quot;Displacement %d\n&quot;, (int)&amp;c2 - (int)&amp;c1);
}
</pre>
<p>The output will be 4 on a 32 bit machine. It is because each character occupies 4 bytes due to alignment requirements.</p>
<p><span style="color: #0000ff">4. What will happen if we try to access a misaligned data?</span></p>
<p>It depends on processor architecture. If the access is misaligned, the processor automatically issues sufficient memory read cycles and packs the data properly onto the data bus. The penalty is on performance. Where as few processors will not have last two address lines, which means there is no-way to access odd byte boundary. Every data access must be aligned (4 bytes) properly. A misaligned access is critical exception on such processors. If the exception is ignored, read data will be incorrect and hence the results.</p>
<p><span style="color: #0000ff">5. Is there any way to query alignment requirements of a data type.</span></p>
<p>Yes. Compilers provide non standard extensions for such needs. For example, __alignof() in Visual Studio helps in getting the alignment requirements of data type. Read MSDN for details.</p>
<p><span style="color: #0000ff">6. When memory reading is efficient in reading 4 bytes at a time on 32 bit machine, why should a <strong>double</strong> type be aligned on 8 byte boundary?</span></p>
<p>It is important to note that most of the processors will have math co-processor, called Floating Point Unit (FPU). Any floating point operation in the code will be translated into FPU instructions. The main processor is nothing to do with floating point execution. All this will be done behind the scenes.</p>
<p>As per standard, double type will occupy 8 bytes. And, every floating point operation performed in FPU will be of 64 bit length. Even float types will be promoted to 64 bit prior to execution.</p>
<p>The 64 bit length of FPU registers forces double type to be allocated on 8 byte boundary. I am assuming (I don’t have concrete information) in case of FPU operations, data fetch might be different, I mean the data bus, since it goes to FPU. Hence, the address decoding will be different for double types (which is expected to be on 8 byte boundary). It means, <em>the address decoding circuits of floating point unit will not have last 3 pins</em>.</p>
<p><strong>Answers:</strong></p>
<pre>sizeof(structa_t) = 4
sizeof(structb_t) = 8
sizeof(structc_t) = 24
sizeof(structd_t) = 16</pre>
<p><strong>Update: 1-May-2013</strong></p>
<p>It is observed that on latest processors we are getting size of struct_c as 16 bytes. I yet to read relevant documentation. I will update once I got proper information (written to few experts in hardware).</p>
<p>On older processors (AMD Athlon X2) using same set of tools (GCC 4.7) I got struct_c size as 24 bytes. The size depends on how memory banking organized at the hardware level.</p>
<p>&#8211; &#8211; &#8211; by <strong><a href="http://www.linkedin.com/in/ramanawithu" target="_blank">Venki</a></strong>. Please write comments if you find anything incorrect, or you want to share more information about the topic discussed above.</p>
		
&nbsp;
&nbsp;
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Big Rectangle Blog Bottom -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="4061219431"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



&nbsp;
&nbsp;
&nbsp;
<h3>Related Topics:</h3><ul><li><a href="http://www.geeksforgeeks.org/problem-binary-search-implementations/" title="A Problem in Many Binary Search Implementations">A Problem in Many Binary Search Implementations</a></li><li><a href="http://www.geeksforgeeks.org/analysis-of-algorithms-set-4-analysis-of-loops/" title="Analysis of Algorithms | Set 4 (Analysis of Loops)">Analysis of Algorithms | Set 4 (Analysis of Loops)</a></li><li><a href="http://www.geeksforgeeks.org/analysis-of-algorithms-set-3asymptotic-notations/" title="Analysis of Algorithms | Set 3 (Asymptotic Notations)">Analysis of Algorithms | Set 3 (Asymptotic Notations)</a></li><li><a href="http://www.geeksforgeeks.org/np-completeness-set-1/" title="NP-Completeness | Set 1 (Introduction)">NP-Completeness | Set 1 (Introduction)</a></li><li><a href="http://www.geeksforgeeks.org/static-vs-dynamic-libraries/" title="Static and Dynamic Libraries | Set 1">Static and Dynamic Libraries | Set 1</a></li><li><a href="http://www.geeksforgeeks.org/the-ubiquitous-binary-search-set-1/" title="The Ubiquitous Binary Search | Set 1">The Ubiquitous Binary Search | Set 1</a></li><li><a href="http://www.geeksforgeeks.org/reservoir-sampling/" title="Reservoir Sampling">Reservoir Sampling</a></li><li><a href="http://www.geeksforgeeks.org/analysis-of-algorithms-set-2-asymptotic-analysis/" title="Analysis of Algorithms | Set 2 (Worst, Average and Best Cases)">Analysis of Algorithms | Set 2 (Worst, Average and Best Cases)</a></li></ul>
<p></p> 
<div>
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.geeksforgeeks.org%2Fstructure-member-alignment-padding-and-data-packing%2F&layout=button_count&show_faces=false&width=90&action=like&colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:90px; height:20px"></iframe>
<a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/" data-text="Structure Member Alignment, Padding and Data Packing" data-count="horizontal" data-via="jakerutter">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<g:plusone size="medium" href="http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/"></g:plusone>
<!-- Place this render call where appropriate -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script></div>





				</div>		  
			</div> <!-- end post main -->					
			<div class="post-meta">
				<div class="left"></div>				
				<div class="clear"></div>
			</div>			
        
			<div class="comments-main">		
 <b>Writing code in comment?</b> Please use <b><a href="http://ideone.com/">ideone.com</a></b> and share the link here.
				
<div id="disqus_thread">
            <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-34659">
        <div id="dsq-comment-header-34659" class="dsq-comment-header">
            <cite id="dsq-cite-34659">
http://www.bfilipek.com/                <span id="dsq-author-user-34659">Bartlomiej Filipek</span>
            </cite>
        </div>
        <div id="dsq-comment-body-34659" class="dsq-comment-body">
            <div id="dsq-comment-message-34659" class="dsq-comment-message"><p>Results (VS 2013 Express, 32 bit)<br />
sizeof(structa_t) = 4<br />
sizeof(structb_t) = 8<br />
sizeof(structc_t) = 24<br />
sizeof(structd_t) = 16</p>
<p>Thanks for the article!<br />
Thinking about layout of class members can really make a difference.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-31262">
        <div id="dsq-comment-header-31262" class="dsq-comment-header">
            <cite id="dsq-cite-31262">
                <span id="dsq-author-user-31262">Sergey Rozhenko</span>
            </cite>
        </div>
        <div id="dsq-comment-body-31262" class="dsq-comment-body">
            <div id="dsq-comment-message-31262" class="dsq-comment-message"><p>Lame mistake: FPU registers are 80 bits on x86, not 64 bits.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-30643">
        <div id="dsq-comment-header-30643" class="dsq-comment-header">
            <cite id="dsq-cite-30643">
                <span id="dsq-author-user-30643">Tao</span>
            </cite>
        </div>
        <div id="dsq-comment-body-30643" class="dsq-comment-body">
            <div id="dsq-comment-message-30643" class="dsq-comment-message"><p>good, thanks</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-30229">
        <div id="dsq-comment-header-30229" class="dsq-comment-header">
            <cite id="dsq-cite-30229">
                <span id="dsq-author-user-30229">Mahesh</span>
            </cite>
        </div>
        <div id="dsq-comment-body-30229" class="dsq-comment-body">
            <div id="dsq-comment-message-30229" class="dsq-comment-message"><p>Very nice concept explanation and I want to add some more with output of the program on both architecture.<br />
32 bit out put :<br />
sizeof(structa_t) = 4<br />
sizeof(structb_t) = 8<br />
sizeof(structc_t) = 16<br />
sizeof(structd_t) = 16</p>
<p>64 Bit output :<br />
sizeof(structa_t) = 4<br />
sizeof(structb_t) = 8<br />
sizeof(structc_t) = 24<br />
sizeof(structd_t) = 16</p>
<p>The alignment is done on the basis of the highest size of the variable in a structure. And also on the basic of architecture(32 or 64 Bit)<br />
For 32 Bit &#8211; Max alignment is 4 Bytes<br />
For 64 Bit &#8211; Max alignment is 8 Bytes</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-30226">
        <div id="dsq-comment-header-30226" class="dsq-comment-header">
            <cite id="dsq-cite-30226">
                <span id="dsq-author-user-30226">baskar</span>
            </cite>
        </div>
        <div id="dsq-comment-body-30226" class="dsq-comment-body">
            <div id="dsq-comment-message-30226" class="dsq-comment-message"><p>thanks for the posting  and all who commented on this</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-29389">
        <div id="dsq-comment-header-29389" class="dsq-comment-header">
            <cite id="dsq-cite-29389">
                <span id="dsq-author-user-29389">Devendra Naga</span>
            </cite>
        </div>
        <div id="dsq-comment-body-29389" class="dsq-comment-body">
            <div id="dsq-comment-message-29389" class="dsq-comment-message"><p>The Alignment depends on the 32 bit or 64 bit architecture of the CPU and the OS.</p>
<p>If the CPU is 64 bit and OS is 32 bit you will still have 4 byte boundary, and if the OS is 64 bit then you will be having 8 byte boundary.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-29388">
        <div id="dsq-comment-header-29388" class="dsq-comment-header">
            <cite id="dsq-cite-29388">
                <span id="dsq-author-user-29388">Devendra Naga</span>
            </cite>
        </div>
        <div id="dsq-comment-body-29388" class="dsq-comment-body">
            <div id="dsq-comment-message-29388" class="dsq-comment-message"><p>Alignment depends on the OS name</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-28944">
        <div id="dsq-comment-header-28944" class="dsq-comment-header">
            <cite id="dsq-cite-28944">
                <span id="dsq-author-user-28944">sangeeta chowdhary</span>
            </cite>
        </div>
        <div id="dsq-comment-body-28944" class="dsq-comment-body">
            <div id="dsq-comment-message-28944" class="dsq-comment-message"><p>for my machine (Linux ysangram-ubuntu 3.2.0-45-generic-pae #70-Ubuntu SMP Wed May 29 20:31:05 UTC 2013 i686 i686 i386 GNU/Linux)<br />
size of last two structures is same. Why padding is not effecting my results.<br />
output:<br />
sizeof(structa_t) = 4<br />
sizeof(structb_t) = 8<br />
sizeof(structc_t) = 16<br />
sizeof(structd_t) = 16<br />
Source code:<br />
typedef struct structa_tag {<br />
            char        c;<br />
            short int   s;<br />
} structa_t;<br />
// structure B<br />
typedef struct structb_tag {<br />
        short int   s;<br />
        char        c;<br />
        int         i;<br />
} structb_t;<br />
// structure C<br />
typedef struct structc_tag {<br />
        char        c;<br />
        double      d;<br />
        int         s;<br />
} structc_t;<br />
// structure D<br />
typedef struct structd_tag {<br />
        double      d;<br />
        int         s;<br />
        char        c;<br />
} structd_t;<br />
int main()<br />
{<br />
    printf(&#8220;sizeof(structa_t) = %dn&#8221;, sizeof(structa_t));<br />
    printf(&#8220;sizeof(structb_t) = %dn&#8221;, sizeof(structb_t));<br />
    printf(&#8220;sizeof(structc_t) = %dn&#8221;, sizeof(structc_t));<br />
    printf(&#8220;sizeof(structd_t) = %dn&#8221;, sizeof(structd_t));<br />
    return 0;<br />
}</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-29390">
        <div id="dsq-comment-header-29390" class="dsq-comment-header">
            <cite id="dsq-cite-29390">
                <span id="dsq-author-user-29390">Devendra Naga</span>
            </cite>
        </div>
        <div id="dsq-comment-body-29390" class="dsq-comment-body">
            <div id="dsq-comment-message-29390" class="dsq-comment-message"><p>Since your alignment is 4 byte you got 16 for structc_t.</p>
<p>sizeof(char) + pad (3 byte) + sizeof(double) + sizeof(int) =<br />
1 + 3 + 8 + 4 = 16</p>
<p>while if the OS is 64 bit you will get </p>
<p>sizeof(char) + pad (7 byte) + sizeof(double) + sizeof(int) =</p>
<p>1 + 7 + 8 + 4 = 20</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-30227">
        <div id="dsq-comment-header-30227" class="dsq-comment-header">
            <cite id="dsq-cite-30227">
                <span id="dsq-author-user-30227">Mahesh</span>
            </cite>
        </div>
        <div id="dsq-comment-body-30227" class="dsq-comment-body">
            <div id="dsq-comment-message-30227" class="dsq-comment-message"><p>But in case of 64 bit<br />
sizeof(char) + pad (7 byte) + sizeof(double) + sizeof(int)+ pad(4 Byet) =</p>
<p>1 + 7 + 8 + 4 + 4 = 24<br />
it should be &#8230;.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-27340">
        <div id="dsq-comment-header-27340" class="dsq-comment-header">
            <cite id="dsq-cite-27340">
                <span id="dsq-author-user-27340">Vijayan .T</span>
            </cite>
        </div>
        <div id="dsq-comment-body-27340" class="dsq-comment-body">
            <div id="dsq-comment-message-27340" class="dsq-comment-message"><p>structure packing.</p>
<p>#pragma pack(push)<br />
#pragma pack(1)</p>
<p>struct tag{<br />
int i;<br />
char c;<br />
float f;<br />
}x;</p>
<p>try this it gives  sizeof(x)  9 bytes instead of 12 bytes</p>
</div>
        </div>

    </li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-17070">
        <div id="dsq-comment-header-17070" class="dsq-comment-header">
            <cite id="dsq-cite-17070">
                <span id="dsq-author-user-17070">RS</span>
            </cite>
        </div>
        <div id="dsq-comment-body-17070" class="dsq-comment-body">
            <div id="dsq-comment-message-17070" class="dsq-comment-message"><p>For me Also size of sizeof(structc_t) = 16 and not 24</p>
<p>Using built-in specs.<br />
COLLECT_GCC=g++<br />
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.6/lto-wrapper<br />
Target: i686-linux-gnu<br />
Configured with: ../src/configure -v &#8211;with-pkgversion=&#8217;Ubuntu/Linaro 4.6.3-1ubuntu5&#8242; &#8211;with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs &#8211;enable-languages=c,c++,fortran,objc,obj-c++ &#8211;prefix=/usr &#8211;program-suffix=-4.6 &#8211;enable-shared &#8211;enable-linker-build-id &#8211;with-system-zlib &#8211;libexecdir=/usr/lib &#8211;without-included-gettext &#8211;enable-threads=posix &#8211;with-gxx-include-dir=/usr/include/c++/4.6 &#8211;libdir=/usr/lib &#8211;enable-nls &#8211;with-sysroot=/ &#8211;enable-clocale=gnu &#8211;enable-libstdcxx-debug &#8211;enable-libstdcxx-time=yes &#8211;enable-gnu-unique-object &#8211;enable-plugin &#8211;enable-objc-gc &#8211;enable-targets=all &#8211;disable-werror &#8211;with-arch-32=i686 &#8211;with-tune=generic &#8211;enable-checking=release &#8211;build=i686-linux-gnu &#8211;host=i686-linux-gnu &#8211;target=i686-linux-gnu<br />
Thread model: posix<br />
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)</p>
<pre> <code language="C">
/* Paste your code here (You may delete these lines if not writing code) */
</code> </pre>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-2" id="dsq-comment-17786">
        <div id="dsq-comment-header-17786" class="dsq-comment-header">
            <cite id="dsq-cite-17786">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-17786">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-17786" class="dsq-comment-body">
            <div id="dsq-comment-message-17786" class="dsq-comment-message"><p>Please read the update.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-16541">
        <div id="dsq-comment-header-16541" class="dsq-comment-header">
            <cite id="dsq-cite-16541">
                <span id="dsq-author-user-16541">Fuzzy</span>
            </cite>
        </div>
        <div id="dsq-comment-body-16541" class="dsq-comment-body">
            <div id="dsq-comment-message-16541" class="dsq-comment-message"><p>In case of structure structc_t for character variable you have added a padding of 7 byte though word length is 4 byte. If I think that word length is 8 byte then why you have not added a padding to the integer variable? I have tested the structc_t in my machine (32bit) and it is giving 16 byte. Am I wrong or right?</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-2" id="dsq-comment-17025">
        <div id="dsq-comment-header-17025" class="dsq-comment-header">
            <cite id="dsq-cite-17025">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-17025">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-17025" class="dsq-comment-body">
            <div id="dsq-comment-message-17025" class="dsq-comment-message"><p>Read the explanation in blue color. Every structure also have alignment requirement.</p>
<p>Please post your compiler flags, processor details, system specs and compiler used.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-13490">
        <div id="dsq-comment-header-13490" class="dsq-comment-header">
            <cite id="dsq-cite-13490">
                <span id="dsq-author-user-13490">Willa</span>
            </cite>
        </div>
        <div id="dsq-comment-body-13490" class="dsq-comment-body">
            <div id="dsq-comment-message-13490" class="dsq-comment-message"><p>I couldn&#8217;t refrain from commenting. Well written!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-10957">
        <div id="dsq-comment-header-10957" class="dsq-comment-header">
            <cite id="dsq-cite-10957">
                <span id="dsq-author-user-10957">Rahul</span>
            </cite>
        </div>
        <div id="dsq-comment-body-10957" class="dsq-comment-body">
            <div id="dsq-comment-message-10957" class="dsq-comment-message"><p>Can you also mention the compiler you used for the particular test cases because as far as I know, the byte alignment will occur in the order of 4 bytes only so for third case i.e. typedef struct structc_tag<br />
{<br />
   char        c;<br />
   double      d;<br />
   int         s;<br />
} structc_t;</p>
<p>16 has to be the total size.<br />
Already tested on two standard compilers &#8211;&gt; g++ and Clang++</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-12294">
        <div id="dsq-comment-header-12294" class="dsq-comment-header">
            <cite id="dsq-cite-12294">
                <span id="dsq-author-user-12294">anksanu</span>
            </cite>
        </div>
        <div id="dsq-comment-body-12294" class="dsq-comment-body">
            <div id="dsq-comment-message-12294" class="dsq-comment-message"><p>All the above code is tested on 64-bit system&#8230;&#8230;</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-15654">
        <div id="dsq-comment-header-15654" class="dsq-comment-header">
            <cite id="dsq-cite-15654">
                <span id="dsq-author-user-15654">Xi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-15654" class="dsq-comment-body">
            <div id="dsq-comment-message-15654" class="dsq-comment-message"><p>I also test onon 64-bit system, this is my answer.<br />
I am using g++-4.6</p>
<pre> <code language="C">
sizeof(structa_t) = 4
sizeof(structb_t) = 8
sizeof(structc_t) = 24
sizeof(structd_t) = 16
</code> </pre>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-9088">
        <div id="dsq-comment-header-9088" class="dsq-comment-header">
            <cite id="dsq-cite-9088">
                <span id="dsq-author-user-9088">learner</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9088" class="dsq-comment-body">
            <div id="dsq-comment-message-9088" class="dsq-comment-message"><p>Hi,<br />
      I don&#8217;t know where i&#8217;m going wrong. I think the o/p should be 32. But i&#8217;m getting 28 here in this case.Please explain me.</p>
<pre> <code language="C">
#include &lt;stdio.h&gt;
struct a
{
        char t;      //1 byte+7 padding byte
        double d;    //8 bytes
        short s;     //2 bytes + 2 padding bytes
        char arr[12];//12 bytes 8+8+4+12=32.
};
int main(void) 
{
        printf(&quot;%d&quot;,sizeof(struct a));   
        return 0;
}
</code> </pre>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-9092">
        <div id="dsq-comment-header-9092" class="dsq-comment-header">
            <cite id="dsq-cite-9092">
                <span id="dsq-author-user-9092">learner</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9092" class="dsq-comment-body">
            <div id="dsq-comment-message-9092" class="dsq-comment-message"><p>Ps:-In 32 bit system.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-10148">
        <div id="dsq-comment-header-10148" class="dsq-comment-header">
            <cite id="dsq-cite-10148">
                <span id="dsq-author-user-10148">Yatal</span>
            </cite>
        </div>
        <div id="dsq-comment-body-10148" class="dsq-comment-body">
            <div id="dsq-comment-message-10148" class="dsq-comment-message"><p>28 byte only<br />
memory block 1 sizeof(char)+3 padding<br />
memory block 2 sizeof(double) &lt;&#8211; first fatch<br />
memory block 3 sizeof(double) &lt;&#8211; secound fatch<br />
memory block 4 sizeof(short) + two byte char array<br />
memory block 5  4<br />
memory block 6  4<br />
memory block 7  2 + 2 padding</p>
<p>total = 4*7<br />
      = 28<br />
Yatal Singh Rathod</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-4" id="dsq-comment-15961">
        <div id="dsq-comment-header-15961" class="dsq-comment-header">
            <cite id="dsq-cite-15961">
                <span id="dsq-author-user-15961">Bhanu Kishore G</span>
            </cite>
        </div>
        <div id="dsq-comment-body-15961" class="dsq-comment-body">
            <div id="dsq-comment-message-15961" class="dsq-comment-message"><p>Yes. It should be 28 only, because there is no need for 7 byte padding after first character. In main there is only one instance of struct a, unless we have array of struct a there is no need to start double address at multiple of 8</p>
<p>Correct me if i am wrong.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-5" id="dsq-comment-32225">
        <div id="dsq-comment-header-32225" class="dsq-comment-header">
            <cite id="dsq-cite-32225">
                <span id="dsq-author-user-32225">Nitin Jain</span>
            </cite>
        </div>
        <div id="dsq-comment-body-32225" class="dsq-comment-body">
            <div id="dsq-comment-message-32225" class="dsq-comment-message"><p>Your calculation is correct, you just need to add structure padding in the last if it is on 64 bit OS then multiple of 8 should be there for read cycle, hence add 4 i.e. 28 + 4 = 32.For testing you can increase the size of array by 2 byte but structure size remain same (32). If you increase further (14) structure size will become 40.<br />
Note- i am testing on MVS on windows 64 bit OS but compiler is 32 bit.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-5" id="dsq-comment-32226">
        <div id="dsq-comment-header-32226" class="dsq-comment-header">
            <cite id="dsq-cite-32226">
                <span id="dsq-author-user-32226">Guest</span>
            </cite>
        </div>
        <div id="dsq-comment-body-32226" class="dsq-comment-body">
            <div id="dsq-comment-message-32226" class="dsq-comment-message"><p>Your calculation is correct, you just need to add structure padding in the last if it is on 64 bit OS then multiple of 8 should be there for read cycle, hence add 4 i.e. 28 + 4 = 32.For testing you can increase the size of array by 2 byte but structure size remain same (32). If you increase further (14) structure size will become 40.<br />
Note- i am testing on MVS on windows 64 bit OS but compiler is 32 bit.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt depth-2" id="dsq-comment-9487">
        <div id="dsq-comment-header-9487" class="dsq-comment-header">
            <cite id="dsq-cite-9487">
                <span id="dsq-author-user-9487">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9487" class="dsq-comment-body">
            <div id="dsq-comment-message-9487" class="dsq-comment-message"><p>I don&#8217;t think 28 will be the output. Please check again. You should get 32 as output. Also, verify that your compiler setting are not optimized to switch off the alignment requirements.</p>
<p>I guess some compilers have limitation of arrays inside structures. Usually in that that case, it boils down to pointer. Check your compiler documentation as well.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-2" id="dsq-comment-9640">
        <div id="dsq-comment-header-9640" class="dsq-comment-header">
            <cite id="dsq-cite-9640">
                <span id="dsq-author-user-9640">Amit</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9640" class="dsq-comment-body">
            <div id="dsq-comment-message-9640" class="dsq-comment-message"><p>I executed this code on linux ( 32 bit archi<br />
tecture) with gcc compiler and got 28 as the answer. After reading the wiki article( <a href="http://en.wikipedia.org/wiki/Data_structure_alignment" rel="nofollow">http://en.wikipedia.org/wiki/Data_structure_alignment</a> ) it was clear to me why it is 28.<br />
There are three main flaws in your understanding of how the memory layout will be:<br />
&#8211; On linux double is 4 byte aligned while on windows it is 8 byte aligned. Since we are running it on linux so we should use 4 byte alignment for double<br />
&#8211; The char array arr[12] will start immediately after short, there won&#8217;t be any padding. char has a 1 byte alignment so why should there be a padding.<br />
&#8211; The total size of the structure has to be a multiple of largest alignment of it&#8217;s members. Since we have a double so the total size of structure should be a multiple of 4</p>
<pre> <code language="C">
struct a {         
char t;      //1 byte+3 padding byte
double d;    //8 bytes         
short s;     //2 bytes
char arr[12];//12 bytes + 2 bytes to make structure size a multiple of 4, total=4+8+2+12+2=28
 };
 </code> </pre>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-9736">
        <div id="dsq-comment-header-9736" class="dsq-comment-header">
            <cite id="dsq-cite-9736">
                <span id="dsq-author-user-9736">Nishant Kumar</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9736" class="dsq-comment-body">
            <div id="dsq-comment-message-9736" class="dsq-comment-message"><p>I am getting 32 on my 32-bit windows based gcc compiler.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-8392">
        <div id="dsq-comment-header-8392" class="dsq-comment-header">
            <cite id="dsq-cite-8392">
                <span id="dsq-author-user-8392">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8392" class="dsq-comment-body">
            <div id="dsq-comment-message-8392" class="dsq-comment-message"><p>@Avi,</p>
<p>I am not sure why first 8 bytes to be left open. May be for some bookkeeping activity. Recommended to consult processor, compiler and your application documentation for correct alignment information.</p>
<p>In your requirement you said, &#8220;except char, every other data type is 4 or 8 byte aligned&#8221;. Usually different data types (primitive) will have different alignment requirement. The above will not be the case. Better get your requirement precisely.</p>
<p>To find the size of structure on 8 byte, do this simple math. Assume the array base address starts on 8 byte boundary, make sure every element is ensured to start on it&#8217;s alignment. I would recommend to do the sample exercises given in the post. If you are not clear, let me know.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-8362">
        <div id="dsq-comment-header-8362" class="dsq-comment-header">
            <cite id="dsq-cite-8362">
                <span id="dsq-author-user-8362">avi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8362" class="dsq-comment-body">
            <div id="dsq-comment-message-8362" class="dsq-comment-message"><p>Hi Venki,<br />
What would be the size of following structure, 40 byte?<br />
struct<br />
{<br />
 char  branch[4];<br />
 long  log;<br />
 char  alpha[2];<br />
 short code;<br />
 short err;<br />
 char  time1[8];<br />
 char  time2[8];<br />
 char  time3[8];<br />
 short length;<br />
};</p>
<p>I also got a set of guidelines:<br />
  Items of type char or unsignedchar, or arrays containing items<br />
    if these types, are byte aligned.<br />
  Structures are word aligned.<br />
  All other types of structure members are word alligned.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-8361">
        <div id="dsq-comment-header-8361" class="dsq-comment-header">
            <cite id="dsq-cite-8361">
                <span id="dsq-author-user-8361">avi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8361" class="dsq-comment-body">
            <div id="dsq-comment-message-8361" class="dsq-comment-message"><p>Hi Venki,<br />
what would be the size of the following structure : 40?<br />
struct sample1<br />
{<br />
 char  branch[4];<br />
 long  log;<br />
 char  alpha[2];<br />
 short code;<br />
 short err;<br />
 char  time1[8];<br />
 char  time2[8];<br />
 char  time3[8];<br />
 short length;<br />
}<br />
====I also got a set of guidelines========================<br />
&#8212;&gt; Items of type char or unsignedchar, or arrays<br />
     containing items if these types, are byte alligned.</p>
<p>&#8212;&gt; Structures are word alligned.</p>
<p>&#8212;&gt; All other types of structure members are word alligned.<br />
============================================================</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-8372">
        <div id="dsq-comment-header-8372" class="dsq-comment-header">
            <cite id="dsq-cite-8372">
                <span id="dsq-author-user-8372">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8372" class="dsq-comment-body">
            <div id="dsq-comment-message-8372" class="dsq-comment-message"><p>Let us see the constraints first.</p>
<p>1. char, unsigned char or it&#8217;s aggregate are byte aligned.<br />
2. Structures and it&#8217;s members (except char) are word aligned.</p>
<p>Assuming word size as 4 bytes. Let us analyze the above structure.</p>
<p>On total we need 48 bytes, as struct also needs to be word aligned.</p>
<pre> <code language="C">
struct sample1
{
    char branch[4]; // 4 bytes
    long log;       // 4 bytes
    char alpha[2];  // 2 bytes
                    // 2 bytes padding, as short is word word aligned
    short code;     // 2 bytes
                    // 2 bytes padding, as next short to be word aligned
    short err;      // 2 bytes
    char time1[8];  // 8 bytes
    char time2[8];  // 8 bytes
    char time3[8];  // 8 bytes
                    // 2 byte padding
    short length;   // 2 bytes
                    // 2 byte padding
}
</code> </pre>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-8375">
        <div id="dsq-comment-header-8375" class="dsq-comment-header">
            <cite id="dsq-cite-8375">
                <span id="dsq-author-user-8375">avi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8375" class="dsq-comment-body">
            <div id="dsq-comment-message-8375" class="dsq-comment-message"><p>Thank You Venki. But why you didn&#8217;t add 4 bytes padding before log is not clear to me.</p>
<p>avi</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-4" id="dsq-comment-8381">
        <div id="dsq-comment-header-8381" class="dsq-comment-header">
            <cite id="dsq-cite-8381">
                <span id="dsq-author-user-8381">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8381" class="dsq-comment-body">
            <div id="dsq-comment-message-8381" class="dsq-comment-message"><p>The rule of thumb is, given that the base address being aligned properly, does all elements aligned naturally? If not introduce padding.</p>
<p>In the above case, assume that the structure base address is 4 byte (as it is given so) aligned. Then the element &#8216;branch&#8217; is 4 byte long, and next element &#8216;log&#8217; which is type long (assumed 4 bytes), should start on 4 byte boundary. It is satisfied, so no padding is needed.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-5" id="dsq-comment-8390">
        <div id="dsq-comment-header-8390" class="dsq-comment-header">
            <cite id="dsq-cite-8390">
                <span id="dsq-author-user-8390">avi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8390" class="dsq-comment-body">
            <div id="dsq-comment-message-8390" class="dsq-comment-message"><p>Back again Venki.<br />
As my concept getting clear I find there&#8217;s  1 more constraint which I ignored earlier.<br />
It is said to leave first 8 bytes of the  buffer and start mapping the structure from 9th byte of the buffer.<br />
Does it indicate the word size is 8 bytes here. If it is so then after alignment structure would be like this ..<br />
 word size assumed 8 bytes<br />
struct sample1<br />
{<br />
    char branch[4]; // 4 bytes<br />
		    // 4 bytes padding, as long is  word aligned<br />
    long log;       // 4 bytes</p>
<p>    char alpha[2];  // 2 bytes<br />
                    // 6 bytes padding, as short is word word aligned<br />
    short code;     // 2 bytes<br />
                    // 6 bytes padding, as next short to be word aligned<br />
    short err;      // 2 bytes</p>
<p>    char time1[8];  // 8 bytes<br />
    char time2[8];  // 8 bytes<br />
    char time3[8];  // 8 bytes<br />
                    // 6 bytes<br />
    short length;   // 2 bytes</p>
<p>}</p>
<p>Is my assumption about word size and structure alignment  correct now?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt depth-5" id="dsq-comment-16040">
        <div id="dsq-comment-header-16040" class="dsq-comment-header">
            <cite id="dsq-cite-16040">
                <span id="dsq-author-user-16040">meer</span>
            </cite>
        </div>
        <div id="dsq-comment-body-16040" class="dsq-comment-body">
            <div id="dsq-comment-message-16040" class="dsq-comment-message"><p>@ venki,<br />
i have checked the address of branch n log, it shows if branch starts at 20th location, then log starts at 28th location. that means 4 bytes are padded after branch</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even depth-3" id="dsq-comment-9257">
        <div id="dsq-comment-header-9257" class="dsq-comment-header">
            <cite id="dsq-cite-9257">
                <span id="dsq-author-user-9257">Rahul</span>
            </cite>
        </div>
        <div id="dsq-comment-body-9257" class="dsq-comment-body">
            <div id="dsq-comment-message-9257" class="dsq-comment-message"><p>Hi Venki,</p>
<p>I am little confused here.</p>
<p>Why does 2 bytes of padding are added here, when next member &#8216;short code&#8217; is also 2 bytes long.<br />
char alpha[2];  // 2 bytes<br />
                // 2 bytes padding, as short is word word aligned</p>
<p>If its word word aligned , then in strcuta_t after char c , shouldn&#8217;t 3 bytes be added for padding, why Only 1 byte is added over there&#8230;?</p>
<pre> <code language="C">
/* Paste your code here (You may delete these lines if not writing code) */
</code> </pre>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment byuser comment-author-bharatshinde odd alt depth-3" id="dsq-comment-22481">
        <div id="dsq-comment-header-22481" class="dsq-comment-header">
            <cite id="dsq-cite-22481">
                <span id="dsq-author-user-22481">BharatShinde</span>
            </cite>
        </div>
        <div id="dsq-comment-body-22481" class="dsq-comment-body">
            <div id="dsq-comment-message-22481" class="dsq-comment-message"><p>@Venky<br />
hi..<br />
why did u add 2 byte padding after char alpha[2] could not it allow short int to occupy within its<br />
own remaining 2 bytes of 4 byte(largest member size i.e long int =4 byte in 32 bit system)..<br />
like</p>
<p>|char[4]|long log|char alpha[2]+short code|&#8230;and so on</p>
<p>as you said &#8220;if it&#8217;s leading to odd memory size then and then only we have to add padding..&#8221;</p>
<pre> <code language="C">

    char branch[4]; // 4 bytes
    long log;       // 4 bytes
    char alpha[2];  // 2 bytes   

    here ----&gt;   // 2 bytes padding, as  short is word word aligned....could not it 
    short code;     // 2 bytes
</code> </pre>
<p>just explain why is it so&#8230;</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment byuser comment-author-bharatshinde even depth-3" id="dsq-comment-22482">
        <div id="dsq-comment-header-22482" class="dsq-comment-header">
            <cite id="dsq-cite-22482">
                <span id="dsq-author-user-22482">BharatShinde</span>
            </cite>
        </div>
        <div id="dsq-comment-body-22482" class="dsq-comment-body">
            <div id="dsq-comment-message-22482" class="dsq-comment-message"><p>@Venky<br />
hi..<br />
why did u add 2 byte padding after char alpha[2] could not it allow short int to occupy within its<br />
own remaining 2 bytes of 4 byte(largest member size i.e long int =4 byte in 32 bit system)..<br />
like</p>
<p>|char[4]|long log|char alpha[2]+short code|&#8230;and so on</p>
<p>as you said &#8220;if it&#8217;s leading to odd memory size then and then only we have to add padding..&#8221;</p>
<p>    char branch[4]; // 4 bytes<br />
    long log;       // 4 bytes<br />
    char alpha[2];  // 2 bytes   </p>
<p>    here &#8212;->   // 2 bytes padding, as  short is word word aligned&#8230;.could not it<br />
    short code;     // 2 bytes</p>
<p>just explain why is it so&#8230;</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-8236">
        <div id="dsq-comment-header-8236" class="dsq-comment-header">
            <cite id="dsq-cite-8236">
http://www.geeksforgeeks.org/archives/9705                <span id="dsq-author-user-8236">praveen</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8236" class="dsq-comment-body">
            <div id="dsq-comment-message-8236" class="dsq-comment-message"><p>i learnt many things from this artical&#8230;Thanx a lot..:) </p>
<pre> <code language="C">
/* Paste your code here (You may delete these lines if not writing code) */
</code> </pre>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-8095">
        <div id="dsq-comment-header-8095" class="dsq-comment-header">
            <cite id="dsq-cite-8095">
                <span id="dsq-author-user-8095">c_learner</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8095" class="dsq-comment-body">
            <div id="dsq-comment-message-8095" class="dsq-comment-message"><p>Hi Venki, </p>
<p>As per the below program for &#8220;struct c&#8221;, I am getting out as 16 instead of 24. Can you please help?</p>
<p>#include </p>
<p>struct c<br />
{<br />
    char a;<br />
    double b;<br />
    int c;<br />
};</p>
<p>int main()<br />
{<br />
    printf(&#8220;Sizeof double %d int %d\n&#8221;, sizeof(double), sizeof(int));<br />
    printf(&#8220;Sizeof struct_c %d\n&#8221;, sizeof(struct c));<br />
}</p>
<p>[user@machine ~]# ./a.out<br />
Sizeof double 8 int 4<br />
Sizeof struct_c 16</p>
<p>[user@machine ~]# uname -r<br />
2.6.9-22.EL</p>
<p>[user@machine ~]# gcc &#8211;version<br />
gcc (GCC) 3.4.4 20050721 (Red Hat 3.4.4-2)<br />
Copyright (C) 2004 Free Software Foundation, Inc.<br />
This is free software; see the source for copying conditions.  There is NO<br />
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
<p>[user@machine4 ~]# cat /proc/cpuinfo<br />
processor       : 0<br />
vendor_id       : GenuineIntel<br />
cpu family      : 15<br />
model           : 2<br />
model name      : Intel(R) Pentium(R) 4 CPU 2.80GHz<br />
stepping        : 9<br />
cpu MHz         : 2793.004<br />
cache size      : 512 KB<br />
fdiv_bug        : no<br />
hlt_bug         : no<br />
f00f_bug        : no<br />
coma_bug        : no<br />
fpu             : yes<br />
fpu_exception   : yes<br />
cpuid level     : 2<br />
wp              : yes<br />
flags           : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe cid xtpr<br />
bogomips        : 5521.40</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-8122">
        <div id="dsq-comment-header-8122" class="dsq-comment-header">
            <cite id="dsq-cite-8122">
                <span id="dsq-author-user-8122">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8122" class="dsq-comment-body">
            <div id="dsq-comment-message-8122" class="dsq-comment-message"><p>It is interesting, it seems you are using older compiler on P4. Although I didn&#8217;t understand all of the HW specs here, let us do the following experiment to rule any optimization.</p>
<p>Declare an array of &#8220;struct c&#8221;, use atleast one of it&#8217;s elements or pass it to a function (by pointer &#8211; I mean the address of array to be passed, not value) defined in another file. Let me know the result. Make sure to turn off the optimization.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-8094">
        <div id="dsq-comment-header-8094" class="dsq-comment-header">
            <cite id="dsq-cite-8094">
                <span id="dsq-author-user-8094">c_learner</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8094" class="dsq-comment-body">
            <div id="dsq-comment-message-8094" class="dsq-comment-message"><p>Hi Venki,</p>
<p>The below program is giving output as 16 instead of 24. Can you please explain the reason. I am pasting the gcc version and processor information. If you need more info please give me the commands, I will collect and post it</p>
<p>[user@machine ~]# ./a.out<br />
Sizeof double 8 int 4<br />
Sizeof struct_c 16</p>
<p>[user@machine ~]# uname -r<br />
2.6.9-22.EL</p>
<p>[user@machine ~]# gcc &#8211;version<br />
gcc (GCC) 3.4.4 20050721 (Red Hat 3.4.4-2)<br />
Copyright (C) 2004 Free Software Foundation, Inc.<br />
This is free software; see the source for copying conditions.  There is NO<br />
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
<p>[user@machine4 ~]# cat /proc/cpuinfo<br />
processor       : 0<br />
vendor_id       : GenuineIntel<br />
cpu family      : 15<br />
model           : 2<br />
model name      : Intel(R) Pentium(R) 4 CPU 2.80GHz<br />
stepping        : 9<br />
cpu MHz         : 2793.004<br />
cache size      : 512 KB<br />
fdiv_bug        : no<br />
hlt_bug         : no<br />
f00f_bug        : no<br />
coma_bug        : no<br />
fpu             : yes<br />
fpu_exception   : yes<br />
cpuid level     : 2<br />
wp              : yes<br />
flags           : fpu vme de pse tsc msr pae mce cx8 apic mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe cid xtpr<br />
bogomips        : 5521.40</p>
<pre> <code language="C">
#include &lt;stdio.h&gt;

struct c
{
    char a;
    double b;
    int c;
};

int main()
{
    printf(&quot;Sizeof double %d int %d\n&quot;, sizeof(double), sizeof(int));
    printf(&quot;Sizeof struct_c %d\n&quot;, sizeof(struct c));
}

</code> </pre>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment byuser comment-author-codinglearner odd alt thread-even depth-1" id="dsq-comment-7882">
        <div id="dsq-comment-header-7882" class="dsq-comment-header">
            <cite id="dsq-cite-7882">
                <span id="dsq-author-user-7882">codinglearner</span>
            </cite>
        </div>
        <div id="dsq-comment-body-7882" class="dsq-comment-body">
            <div id="dsq-comment-message-7882" class="dsq-comment-message"><pre> <code language="C">
#include &lt;stdio.h&gt;
struct u
{
 union v
 {
  int i;
  int j;
 }a[10];
 int b[5];
 char d;
 float f ;
 }w;

int main()
{
 printf(&quot;%u&quot;,sizeof(w));
 return 0;
}


</code> </pre>
<p> plzz xplain the result&#8230;???</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-8109">
        <div id="dsq-comment-header-8109" class="dsq-comment-header">
            <cite id="dsq-cite-8109">
                <span id="dsq-author-user-8109">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-8109" class="dsq-comment-body">
            <div id="dsq-comment-message-8109" class="dsq-comment-message"><p>@codinglearner, Union and Struct follow same alignment principles. Alignment is for access data types, not for those used to aggregate them. See the following comments,</p>
<pre> <code language="C">
struct u
{
    union v
    {
        int i; // 4 bytes
        int j; // 4 bytes
    }a[10];    // Overall 4 * 10 = 40 bytes
    int b[5];  // 4 * 5 = 20 bytes
    char d;    // 1 byte followed by 3 byte padding
    float f ;  // 4 bytes
}w; // 40 + 20 + 1 + 3 + 4 = 68 on 32 bit machine
</code> </pre>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-6628">
        <div id="dsq-comment-header-6628" class="dsq-comment-header">
            <cite id="dsq-cite-6628">
                <span id="dsq-author-user-6628">Tarun</span>
            </cite>
        </div>
        <div id="dsq-comment-body-6628" class="dsq-comment-body">
            <div id="dsq-comment-message-6628" class="dsq-comment-message"><p>Hi</p>
<p>I have big confusion after reading through this article.<br />
1. A 32 bit system,<br />
   has 32 data lines,<br />
   any given address in the system would point to a word = 32 bits<br />
2. A 64 bit system,<br />
   has 64 data lines,<br />
   any given address in the system would point to a word = 64 bits</p>
<p>Now, you said memory is byte addressable. So does this discussion here pertains to 8 bit systems only??</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-2" id="dsq-comment-6630">
        <div id="dsq-comment-header-6630" class="dsq-comment-header">
            <cite id="dsq-cite-6630">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-6630">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-6630" class="dsq-comment-body">
            <div id="dsq-comment-message-6630" class="dsq-comment-message"><p>@Tarun, even prior to 32 bit systems, we had 16 bit machines, they too addressing memory at byte level. Note that there are processors which having data width of 16 bits, and yet address bus width of 24 bits. They still access memory byte wise.</p>
<p>Irrespective of address bus width and data bus width, many processors address memory as byte addressable for backward compatibility. Also, there are few processors (like in DSP or high speed industrial automation) that won&#8217;t allow byte level access at all.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment byuser comment-author-dayananda odd alt thread-even depth-1" id="dsq-comment-5790">
        <div id="dsq-comment-header-5790" class="dsq-comment-header">
            <cite id="dsq-cite-5790">
http://www.niaboctruk.wordpress.com                <span id="dsq-author-user-5790">Daya</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5790" class="dsq-comment-body">
            <div id="dsq-comment-message-5790" class="dsq-comment-message"><p>Thanks a tonne bro. My life&#8217;s better from this moment <img src="http://d2o58evtke57tz.cloudfront.net/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" class="wp-smiley" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-5734">
        <div id="dsq-comment-header-5734" class="dsq-comment-header">
            <cite id="dsq-cite-5734">
                <span id="dsq-author-user-5734">Krishs</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5734" class="dsq-comment-body">
            <div id="dsq-comment-message-5734" class="dsq-comment-message"><p>Excellent article!!! clarified many doubts in mind. keep it up. Thanks!!! <img src="http://d2o58evtke57tz.cloudfront.net/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment byuser comment-author-venki bypostauthor odd alt thread-even depth-1" id="dsq-comment-5450">
        <div id="dsq-comment-header-5450" class="dsq-comment-header">
            <cite id="dsq-cite-5450">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-5450">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5450" class="dsq-comment-body">
            <div id="dsq-comment-message-5450" class="dsq-comment-message"><p>Another related article can be found <a href="http://software.intel.com/en-us/blogs/2011/08/18/understanding-x86-vs-arm-memory-alignment-on-android/" rel="nofollow">here</a>,</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-5096">
        <div id="dsq-comment-header-5096" class="dsq-comment-header">
            <cite id="dsq-cite-5096">
                <span id="dsq-author-user-5096">Guest</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5096" class="dsq-comment-body">
            <div id="dsq-comment-message-5096" class="dsq-comment-message"><p>Excellent article.</p>
<p>Would &#8220;long long&#8221; on 32bit machine have a 8byte alignment ? Should not be, as even 4byte alignment it correct (both would need 2 cycles).</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-2" id="dsq-comment-5436">
        <div id="dsq-comment-header-5436" class="dsq-comment-header">
            <cite id="dsq-cite-5436">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-5436">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5436" class="dsq-comment-body">
            <div id="dsq-comment-message-5436" class="dsq-comment-message"><p>Good question. I depends on compiler the way it reads 8 byte variable. On my machine, I got <strong>long long</strong> size as 8 bytes and its alignment as 8 bytes.</p>
<p>In GCC compiler, we have few compiler extensions like</p>
<pre> <code language="C">
 int __attribute__((vector_size(8))) vector_special_variable;
</code> </pre>
<p>However the implementation of these extensions are compiler and processor dependent. For example few processors provide instruction for block read/write which compiler can make use.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-4815">
        <div id="dsq-comment-header-4815" class="dsq-comment-header">
            <cite id="dsq-cite-4815">
                <span id="dsq-author-user-4815">sam</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4815" class="dsq-comment-body">
            <div id="dsq-comment-message-4815" class="dsq-comment-message"><p>explain me plz why there will be  padding of 7 bytes after the first element of the structc_t.<br />
i am getting confused as i am thinking that there should be padding of only 3 bytes after the char element,  because after that 3 bytes padding the address for the double element will still be multiple of 8.<br />
and one more thing i want to ask..</p>
<p>&#8220;double variable will be allocated on 8 byte boundary&#8221;<br />
what does this thing means? i knw thats a silly one.. bt still plz let me knw..</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-2" id="dsq-comment-5060">
        <div id="dsq-comment-header-5060" class="dsq-comment-header">
            <cite id="dsq-cite-5060">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-5060">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5060" class="dsq-comment-body">
            <div id="dsq-comment-message-5060" class="dsq-comment-message"><p>FAQ 6 clarifies your question. Also read the other comments.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment byuser comment-author-gilco even thread-odd thread-alt depth-1" id="dsq-comment-4410">
        <div id="dsq-comment-header-4410" class="dsq-comment-header">
            <cite id="dsq-cite-4410">
                <span id="dsq-author-user-4410">Gilco</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4410" class="dsq-comment-body">
            <div id="dsq-comment-message-4410" class="dsq-comment-message"><p>Great explanations!!!</p>
<p>Can someone please explain how come for the following structure I wrote:</p>
<pre> <code language="C">

struct list_head
{
	struct list_head * next;
	struct list_head * prev;
};

struct myFriend
{	
	char name[10];
	unsigned double weight;
	unsigned double height;
	struct list_head list;  //embedding the list component
};</code> </pre>
<p>I&#8217;m working on x86 so sizeof(address) is 4 bytes.<br />
I got size of 28??</p>
<p>but I calculated on my own and got: 30!!</p>
<p>here is my calculations:<br />
10*sizeof(char)+(2)padding+sizeof(unsigned double)+sizeof(unsigned double)+2*sizeof(address)+(2)padding = 30 Bytes</p>
<p>Thanks for the help guys! <img src="http://d2o58evtke57tz.cloudfront.net/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /></p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-2" id="dsq-comment-4790">
        <div id="dsq-comment-header-4790" class="dsq-comment-header">
            <cite id="dsq-cite-4790">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-4790">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4790" class="dsq-comment-body">
            <div id="dsq-comment-message-4790" class="dsq-comment-message"><p>@Gilco, sorry for the delay, I missed to observe the comment.</p>
<p>Here it is&#8230;<br />
What should be alignment of &#8216;myFriend&#8217;? It should be multiple of largest element in that array. The largest element of &#8216;myFriend&#8217; can be either <strong>double</strong> or <strong>list_head</strong> both takes 8 bytes each. The alignment of &#8216;myFriend&#8217; should be 8 bytes, means any object of &#8216;myFriend&#8217; should start on 8 byte boundary.</p>
<p>Now, how much should be the padding after <em>char</em> array? It is determined by the alignment requirements of next element which is 8 bytes. Hence after the <em>char</em> array there will be padding of 6 bytes. Overall</p>
<p>10 + 6 (padding) + 8 + 8 + 8 = 40 byte <img src="http://d2o58evtke57tz.cloudfront.net/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>I am surprised how you got 28 on computer and 30 on mind calculations.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-3" id="dsq-comment-4792">
        <div id="dsq-comment-header-4792" class="dsq-comment-header">
            <cite id="dsq-cite-4792">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-4792">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4792" class="dsq-comment-body">
            <div id="dsq-comment-message-4792" class="dsq-comment-message"><p>I think you left <em>unsigned double</em> (?) which is not allowed by compiler. A double can&#8217;t be unsigned. May be the compiler is considering the &#8216;weight&#8217; and &#8216;height&#8217; members as <em>unsigned int</em>, hence the output as 28 (check yourself).</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-neha2210 odd alt depth-4" id="dsq-comment-15801">
        <div id="dsq-comment-header-15801" class="dsq-comment-header">
            <cite id="dsq-cite-15801">
                <span id="dsq-author-user-15801">neha2210</span>
            </cite>
        </div>
        <div id="dsq-comment-body-15801" class="dsq-comment-body">
            <div id="dsq-comment-message-15801" class="dsq-comment-message"><p>I think on Linux machine it will be 28 as the double is 4 byte aligned and not 8 byte aligned.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even depth-2" id="dsq-comment-5434">
        <div id="dsq-comment-header-5434" class="dsq-comment-header">
            <cite id="dsq-cite-5434">
                <span id="dsq-author-user-5434">Karthick</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5434" class="dsq-comment-body">
            <div id="dsq-comment-message-5434" class="dsq-comment-message"><p>Here is my though on it.. The structure would have </p>
<p>name is a char[10] =&gt; internal implementation is char* =&gt; 4  not 10&#8230;</p>
<p>double =&gt; 8<br />
double =&gt; 8<br />
list_head* =&gt; 2*4 = 8 </p>
<p>Total = 24&#8230;</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-3" id="dsq-comment-5435">
        <div id="dsq-comment-header-5435" class="dsq-comment-header">
            <cite id="dsq-cite-5435">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-5435">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5435" class="dsq-comment-body">
            <div id="dsq-comment-message-5435" class="dsq-comment-message"><p>@Karthick, if char <em>name[10]</em> is stored as <em>char *</em>, where will be the size of name stored? I don&#8217;t think compiler can change attributes of identifiers.</p>
<p>User wants array semantics where as your suggestion (assumption) using pointer semantics.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment byuser comment-author-venki bypostauthor even thread-even depth-1" id="dsq-comment-4276">
        <div id="dsq-comment-header-4276" class="dsq-comment-header">
            <cite id="dsq-cite-4276">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-4276">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4276" class="dsq-comment-body">
            <div id="dsq-comment-message-4276" class="dsq-comment-message"><p>A related post on bit-fields<br />
<a href="http://geeksforgeeks.org/forum/topic/c-structure-size-with-empty-bitfield" rel="nofollow">http://geeksforgeeks.org/forum/topic/c-structure-size-with-empty-bitfield</a></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2983">
        <div id="dsq-comment-header-2983" class="dsq-comment-header">
            <cite id="dsq-cite-2983">
                <span id="dsq-author-user-2983">sharat</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2983" class="dsq-comment-body">
            <div id="dsq-comment-message-2983" class="dsq-comment-message"><p>Need more details for structc:</p>
<p>How did you arrive at padding 7 between Char and double(1st and 2nd parameter of the structure)</p>
<p>Is it because that double has to start at and address which is a multiple of 8(which is size of double) ? </p>
<p>If yes, then 7 is not always true. Consider the below example</p>
<p>if char a(first element) resides at 0x04(which is a valid assumption), then a padding of 7 would make double store at 0xc which is not a multiple of 8 . A padding of 3 would be appropriate here.</p>
<p>Please let me know if my understanding is right. or Am I missing something. </p>
<p>Thanks,<br />
Sharat.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-2" id="dsq-comment-2987">
        <div id="dsq-comment-header-2987" class="dsq-comment-header">
            <cite id="dsq-cite-2987">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-2987">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2987" class="dsq-comment-body">
            <div id="dsq-comment-message-2987" class="dsq-comment-message"><p>@sharat, I miss one exception here. At the start of the article I told to assume every structure allocated at multiple of 4 bytes for easy.</p>
<p>It is not always true as explained in case of structc_t. Every structure type also will have alignment requirement. So in case, if the structure contains double as largest member, such structures will be allocated on 8 byte boundary, not on 4 byte boundary.</p>
<p>I will make required correction.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-2997">
        <div id="dsq-comment-header-2997" class="dsq-comment-header">
            <cite id="dsq-cite-2997">
                <span id="dsq-author-user-2997">sharat</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2997" class="dsq-comment-body">
            <div id="dsq-comment-message-2997" class="dsq-comment-message"><p>Thanks for the clarifications..</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-4" id="dsq-comment-4818">
        <div id="dsq-comment-header-4818" class="dsq-comment-header">
            <cite id="dsq-cite-4818">
                <span id="dsq-author-user-4818">Sabya Sachi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-4818" class="dsq-comment-body">
            <div id="dsq-comment-message-4818" class="dsq-comment-message"><p>gcc 4.5.2 gives the size to be 16. Is this compiler dependent???</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-5" id="dsq-comment-5437">
        <div id="dsq-comment-header-5437" class="dsq-comment-header">
            <cite id="dsq-cite-5437">
http://geeksforgeeks.org/?page_id=2                <span id="dsq-author-user-5437">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-5437" class="dsq-comment-body">
            <div id="dsq-comment-message-5437" class="dsq-comment-message"><p>@Sabya Sachi, could you provide more details like processor, OS, what kind of GCC port (code blocks, mingw, etc&#8230;).</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-2982">
        <div id="dsq-comment-header-2982" class="dsq-comment-header">
            <cite id="dsq-cite-2982">
                <span id="dsq-author-user-2982">sharat</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2982" class="dsq-comment-body">
            <div id="dsq-comment-message-2982" class="dsq-comment-message"><p>Note that a double variable will be allocated on 8 byte boundary on 32 bit machine and requires two memory read cycles</p>
<p>Q) Why is it allocated on a 8 byte boundary, what is the issue with allocating on a 4 byte boundary ? it would still require two mem read cycles to read a double.</p>
<p>Thanks in advance,<br />
Sharat.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor odd alt depth-2" id="dsq-comment-2988">
        <div id="dsq-comment-header-2988" class="dsq-comment-header">
            <cite id="dsq-cite-2988">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-2988">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2988" class="dsq-comment-body">
            <div id="dsq-comment-message-2988" class="dsq-comment-message"><p>@sharat, This is good question. It was asked by one of my colleague. I will update the necessary changes as FAQ.</p>
<p>It is important to note that every processor will have math co-processor (most of the processors), called Floating Point Unit (FPU). Any floating point operation in the code will be translated into FPU instructions. The main processor is nothing to do with floating point execution. All this will be done behind the scenes.</p>
<p>As per standard, <em>double</em> type will occupy 8 bytes. Hence, every floating point operation performed in FPU will be 64 bit length. Even <em>float</em> types will be promoted to 64 bit prior to execution.</p>
<p>The 64 bit length of FPU registers forces <strong>double</strong> type to be allocated on 8 byte boundary. I am assuming (I don&#8217;t have concrete information) in case of FPU operations, data fetch might be different, since it goes to FPU. Hence, the address decoding will be different for double types (which is expected to be on 8 byte boundary). It means, <strong>the address decoding circuits of floating point unit will not have last 3 pins</strong>.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-2711">
        <div id="dsq-comment-header-2711" class="dsq-comment-header">
            <cite id="dsq-cite-2711">
                <span id="dsq-author-user-2711">sk</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2711" class="dsq-comment-body">
            <div id="dsq-comment-message-2711" class="dsq-comment-message"><p>really &#8230;good stuff.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-2703">
        <div id="dsq-comment-header-2703" class="dsq-comment-header">
            <cite id="dsq-cite-2703">
                <span id="dsq-author-user-2703">jag</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2703" class="dsq-comment-body">
            <div id="dsq-comment-message-2703" class="dsq-comment-message"><p>There is a possible typo at &#8220;structure C – Every structure will also have alignment requirements&#8221;:<br />
&#8220;structc_t needs sizeof(char) + 7 byte padding + sizeof(double) + sizeof(int)&#8221;<br />
Struct C is defined as char+double+short so the size expected is 18</p>
</div>
        </div>

    <ul class="children">
    <li class="comment byuser comment-author-venki bypostauthor even depth-2" id="dsq-comment-2709">
        <div id="dsq-comment-header-2709" class="dsq-comment-header">
            <cite id="dsq-cite-2709">
http://www.linkedin.com/in/ramanawithu                <span id="dsq-author-user-2709">Venki</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2709" class="dsq-comment-body">
            <div id="dsq-comment-message-2709" class="dsq-comment-message"><p>@Jag, thanks for correction. I will update the post.</p>
<p>The analogy is still valid. We need 24 bytes for structc_t. There will be padding of six bytes at the end of structure to make structure size multiple of 8 bytes. Overall it looks,</p>
<p><strong>sizeof(char) + 7 (padding) + sizeof(double) + sizeof(short) + 6 (padding) = 1 + 7 + 8 + 2 + 6 = 24.</strong></p>
<p>I will make the data type of <strong><em>s</em></strong> as <em>int</em> instead of <em>short</em>, so that the explanation will be untouched.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2695">
        <div id="dsq-comment-header-2695" class="dsq-comment-header">
            <cite id="dsq-cite-2695">
                <span id="dsq-author-user-2695">tej</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2695" class="dsq-comment-body">
            <div id="dsq-comment-message-2695" class="dsq-comment-message"><p>I was looking for such article on Data Alignment. So thanks very much to share the same.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-2683">
        <div id="dsq-comment-header-2683" class="dsq-comment-header">
            <cite id="dsq-cite-2683">
                <span id="dsq-author-user-2683">Narendra</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2683" class="dsq-comment-body">
            <div id="dsq-comment-message-2683" class="dsq-comment-message"><p>Great Job.</p>
<p>Thanks a lot</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
var disqus_url = 'http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/';
var disqus_identifier = '9705 http://geeksforgeeks.org/?p=9705';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'geeksforgeeks';
var disqus_title = "Structure Member Alignment, Padding and Data Packing";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

			</div>
	
					
			
			

		</div> <!-- end post -->	

<br></br>
	
</div> <!-- end content -->

<ul id="sidebar">
	<li id="text-19" class="widget widget_text">			<div class="textwidget"><script>
  (function() {
    var cx = '009682134359037907028:tj6eafkv_be';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

<style type="text/css">
  .gsc-control-cse {
    font-family: "Trebuchet MS", sans-serif;
    border-color: #E1F3DA;
    background-color: #E1F3DA;
  }
  input.gsc-input {
    border-color: #94CC7A;
  }
  input.gsc-search-button {
    border-color: #94CC7A;
    background-color: #AADA92;
  }
  .gsc-tabHeader.gsc-tabhInactive {
    border-color: #A9DA92;
    background-color: #FFFFFF;
  }
  .gsc-tabHeader.gsc-tabhActive {
    border-color: #A9DA92;
    background-color: #A9DA92;
  }
  .gsc-tabsArea {
    border-color: #A9DA92;
  }
  .gsc-webResult.gsc-result {
    border-color: #A9DA92;
    background-color: #FFFFFF;
  }
  .gsc-webResult.gsc-result:hover {
    border-color: #A9DA92;
    background-color: #FFFFFF;
  }
  .gs-webResult.gs-result a.gs-title:link,
  .gs-webResult.gs-result a.gs-title:link b {
    color: #009900;
  }
  .gs-webResult.gs-result a.gs-title:visited,
  .gs-webResult.gs-result a.gs-title:visited b {
    color: #009900;
  }
  .gs-webResult.gs-result a.gs-title:hover,
  .gs-webResult.gs-result a.gs-title:hover b {
    color: #003300;
  }
  .gs-webResult.gs-result a.gs-title:active,
  .gs-webResult.gs-result a.gs-title:active b {
    color: #009900;
  }
  .gsc-cursor-page {
    color: #009900;
  }
  a.gsc-trailing-more-results:link {
    color: #009900;
  }
  .gs-webResult.gs-result .gs-snippet {
    color: #454545;
  }
  .gs-webResult.gs-result .gs-visibleUrl {
    color: #33cc00;
  }
  .gs-webResult.gs-result .gs-visibleUrl-short {
    color: #33cc00;
  }
  .gs-webResult.gs-result .gs-visibleUrl-short {
    display: none;
  }
  .gs-webResult.gs-result .gs-visibleUrl-long {
    display: block;
  }
  .gsc-cursor-box {
    border-color: #A9DA92;
  }
  .gsc-results .gsc-cursor-page {
    border-color: #A9DA92;
    background-color: #FFFFFF;
  }
  .gsc-results .gsc-cursor-page.gsc-cursor-current-page {
    border-color: #A9DA92;
    background-color: #A9DA92;
  }
  .gs-promotion.gs-result {
    border-color: #94CC7A;
    background-color: #CBE8B4;
  }
  .gs-promotion.gs-result a.gs-title:link {
    color: #0066CC;
  }
  .gs-promotion.gs-result a.gs-title:visited {
    color: #0066CC;
  }
  .gs-promotion.gs-result a.gs-title:hover {
    color: #0066CC;
  }
  .gs-promotion.gs-result a.gs-title:active {
    color: #0066CC;
  }
  .gs-promotion.gs-result .gs-snippet {
    color: #454545;
  }
  .gs-promotion.gs-result .gs-visibleUrl,
  .gs-promotion.gs-result .gs-visibleUrl-short {
    color: #815FA7;
  }
</style>    </div>
		</li>
<li id="text-9" class="widget widget_text">			<div class="textwidget"><div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=138031159685820";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="https://www.facebook.com/pages/GeeksforGeeks/316764689022" data-width="250" data-height="170" data-colorscheme="light" data-show-faces="true" data-header="false" data-stream="false" data-show-border="false"></div></div>
		</li>
<li id="text-18" class="widget widget_text">			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- LargeRectangleSide -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="1884636833"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</li>
<li id="text-13" class="widget widget_text">			<div class="textwidget"><ul><li><a href="http://www.geeksforgeeks.org/category/interview-experiences/">Interview Experiences</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/advance-data-structures">Advanced Data Structures</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/dynamic-programming">Dynamic Programming</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/Greedy-Algorithm/">Greedy Algorithms</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/backtracking">Backtracking</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/pattern-searching">Pattern Searching</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/divide-and-conquer">Divide & Conquer</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/MathematicalAlgo">Mathematical Algorithms</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/recursion">Recursion</a></li>
<li><a href="http://www.geeksforgeeks.org/tag/geometric-algorithms/">Geometric Algorithms</a></li>
</ul></div>
		</li>
<li id="text-17" class="widget widget_text">			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Big 300x600 Sidebar -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="4402736037"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</li>
<li id="text-14" class="widget widget_text"><h2 class="widgettitle">Popular Posts</h2>
			<div class="textwidget"><ul>
<li><a href="http://www.geeksforgeeks.org/write-a-c-program-to-print-all-permutations-of-a-given-string/">  All permutations of a given string </a></li>
<li><a href="http://www.geeksforgeeks.org/memory-layout-of-c-program/"> Memory Layout of C Programs</a> </li>
<li><a href="http://www.geeksforgeeks.org/understanding-extern-keyword-in-c/"> Understanding “extern” keyword in C</a> </li>
<li><a href="http://www.geeksforgeeks.org/median-of-two-sorted-arrays/">Median of two sorted arrays</a> </li>
<li><a href="http://www.geeksforgeeks.org/inorder-tree-traversal-without-recursion-and-without-stack/"> Tree traversal without recursion and without stack! </a></li>
<li><a href="http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/"> Structure Member Alignment, Padding and Data Packing</a> </li>
<li><a href="http://www.geeksforgeeks.org/write-a-function-to-get-the-intersection-point-of-two-linked-lists/"> Intersection point of two Linked Lists</a> </li>
<li><a href="http://www.geeksforgeeks.org/lowest-common-ancestor-in-a-binary-search-tree/"> Lowest Common Ancestor in a BST.</span></a> </li>
<li><a href="http://www.geeksforgeeks.org/a-program-to-check-if-a-binary-tree-is-bst-or-not/"> Check if a binary tree is BST or not</a> </li>
<li><a href="http://www.geeksforgeeks.org/sorted-linked-list-to-balanced-bst/"> Sorted Linked List to Balanced BST</a></li>
</ul></div>
		</li>
<li id="text-3" class="widget widget_text">			<div class="textwidget"><a href="https://twitter.com/GeeksforGeeks" class="twitter-follow-button" data-show-count="false">Follow @GeeksforGeeks</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>         


<!-- GOOGLE FEEDBURNER BUTTON-->
<a href="http://feeds.feedburner.com/Geeksforgeeks" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="border:0"/></a><a href="http://feeds.feedburner.com/Geeksforgeeks" title="Subscribe to my feed" rel="alternate" type="application/rss+xml">Subscribe</a>

</div>
		</li>
<li id="text-21" class="widget widget_text"><h2 class="widgettitle">Recent Comments</h2>
			<div class="textwidget"><script type="text/javascript" src="http://geeksforgeeks.disqus.com//recent_comments_widget.js?num_items=6&hide_avatars=1&excerpt_length=50&hide_mods=0"></script></div>
		</li>
<li id="text-22" class="widget widget_text">			<div class="textwidget"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- LinkAd -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:90px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="2606115235"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- LinkAd -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:90px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="2606115235"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- LinkAd -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:90px"
     data-ad-client="ca-pub-9465609616171866"
     data-ad-slot="2606115235"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
		</li>

</ul>					  
		<div class="clear"></div>

		<div id="footer">
		
		    <div class="xhtml">
                        @geeksforgeeks, <a href="http://creativecommons.org/licenses/by-nc-nd/2.5/in/deed.en_US" title="Valid XHTML Strict 1.0">Some rights reserved</a>  <a href="http://www.geeksforgeeks.org/about/contact-us/"> &nbsp; &nbsp; &nbsp; &nbsp;Contact Us!</a>

		    </div>
		    
		    <div class="credits">
			  Powered by <a href="http://wordpress.org">WordPress </a> &amp; <a href="http://mootools.net/" title="Mootools JavaScript Framework">MooTools</a>, customized by geeksforgeeks team </div>
			  
		   <div class="clear"></div>						                            
		   
		</div> <!--end footer-->  
        
		        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'geeksforgeeks';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('rel'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        <script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9'></script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0.9'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='http://d2o58evtke57tz.cloudfront.net/wp-content/plugins/bbpress/templates/default/js/editor.js?ver=2.5.4-5380'></script>
				  
		</div> <!--end wrapper-->
        <div id="ajaxSpinner"></div> <!--For AJAX spinner holder-->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12148232-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
	</body>

</html>
<!-- Dynamic page generated in 0.259 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-11-27 23:22:57 -->

<!-- Compression = gzip -->
<!-- super cache -->